©,
KC:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
var "
MyAllowSpecificOrigins 
= 
$str 5
;5 6
builder		 
.		 
Services		 
.		 
AddCors		 
(		 
options		  
=>		! #
{

 
options 
. 
	AddPolicy 
( 
name 
: "
MyAllowSpecificOrigins 2
,2 3
policy 
=> 
{ 
policy  
.  !
WithOrigins! ,
(, -
$str- D
)D E
;E F
policy  
.  !
AllowAnyHeader! /
(/ 0
)0 1
;1 2
policy  
.  !
AllowAnyMethod! /
(/ 0
)0 1
;1 2
} 
) 
; 
} 
) 
; 
builder 
. 
Services 
. 
AddApplication 
(  
)  !
;! "
builder 
. 
Services 
. 
AddInfrastructure "
(" #
builder# *
.* +
Configuration+ 8
)8 9
;9 :
builder 
. 
Services 
. 
AddIdentity 
( 
builder $
.$ %
Configuration% 2
)2 3
;3 4
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
c  
=>! #
{ 
c 
. 

SwaggerDoc 
( 
$str 
, 
new 
OpenApiInfo &
{' (
Title) .
=/ 0
$str1 ;
,; <
Version= D
=E F
$strG K
}L M
)M N
;N O
c"" 
."" !
AddSecurityDefinition"" 
("" 
$str"" $
,""$ %
new""& )!
OpenApiSecurityScheme""* ?
{## 
Name$$ 
=$$ 
$str$$ 
,$$ 
Type%% 
=%% 
SecuritySchemeType%% !
.%%! "
Http%%" &
,%%& '
Scheme&& 
=&& 
$str&& 
,&& 
BearerFormat'' 
='' 
$str'' 
,'' 
In(( 

=(( 
ParameterLocation(( 
.(( 
Header(( %
,((% &
Description)) 
=)) 
$str)) t
}** 
)** 
;** 
c,, 
.,, "
AddSecurityRequirement,, 
(,, 
new,,  &
OpenApiSecurityRequirement,,! ;
{-- 
{.. 	
new// !
OpenApiSecurityScheme// %
{00 
	Reference11 
=11 
new11 
OpenApiReference11  0
{22 
Type33 
=33 
ReferenceType33 (
.33( )
SecurityScheme33) 7
,337 8
Id44 
=44 
$str44 !
}55 
}66 
,66 
Array77 
.77 
Empty77 
<77 
string77 
>77 
(77  
)77  !
}88 	
}99 
)99 
;99 
}:: 
):: 
;:: 
var<< 
app<< 
=<< 	
builder<<
 
.<< 
Build<< 
(<< 
)<< 
;<< 
if?? 
(?? 
app?? 
.?? 
Environment?? 
.?? 
IsDevelopment?? !
(??! "
)??" #
)??# $
{@@ 
appAA 
.AA 

UseSwaggerAA 
(AA 
)AA 
;AA 
appBB 
.BB 
UseSwaggerUIBB 
(BB 
)BB 
;BB 
}CC 
appEE 
.EE 
UseStaticFilesEE 
(EE 
)EE 
;EE 
appGG 
.GG 

UseRoutingGG 
(GG 
)GG 
;GG 
appII 
.II 
UseCorsII 
(II 
$strII $
)II$ %
;II% &
appKK 
.KK 
UseHttpsRedirectionKK 
(KK 
)KK 
;KK 
appMM 
.MM 
UseMiddlewareMM 
<MM )
ValidationExceptionMiddlewareMM /
>MM/ 0
(MM0 1
)MM1 2
;MM2 3
appNN 
.NN 
UseAuthenticationNN 
(NN 
)NN 
;NN 
appOO 
.OO 
UseAuthorizationOO 
(OO 
)OO 
;OO 
appQQ 
.QQ 
MapControllersQQ 
(QQ 
)QQ 
;QQ 
awaitSS 
appSS 	
.SS	 

RunAsyncSS
 
(SS 
)SS 
;SS 
publicUU 
partialUU 
classUU 
ProgramUU 
{VV 
}WW ë9
_C:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\UsersController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UsersController  
:! "
ControllerBase# 1
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public 
UsersController 
( 
	IMediator (
mediator) 1
)1 2
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpPut	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Result' -
<- .
Unit. 2
>2 3
>3 4
>4 5

UpdateUser6 @
(@ A
GuidA E
idF H
,H I
UpdateUserCommandJ [
command\ c
)c d
{ 	
if 
( 
! 
IsUserAuthorized !
(! "
command" )
.) *
UserId* 0
)0 1
)1 2
{ 
return 
Forbid 
( 
) 
;  
} 
if 
( 
id 
!= 
command 
. 
UserId $
)$ %
{ 
return   

BadRequest   !
(  ! "
)  " #
;  # $
}!! 
var"" 
result"" 
="" 
await"" 
mediator"" '
.""' (
Send""( ,
("", -
command""- 4
)""4 5
;""5 6
if## 
(## 
result## 
.## 
	IsSuccess##  
)##  !
{$$ 
return%% 
	NoContent%%  
(%%  !
)%%! "
;%%" #
}&& 
else'' 
{(( 
return)) 

BadRequest)) !
())! "
result))" (
.))( )
ErrorMessage))) 5
)))5 6
;))6 7
}** 
}++ 	
[-- 	

HttpDelete--	 
(-- 
$str-- 
)--  
]--  !
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (

DeleteUser..) 3
(..3 4
Guid..4 8
id..9 ;
)..; <
{// 	
if00 
(00 
!00 
IsUserAuthorized00 !
(00! "
id00" $
)00$ %
)00% &
{11 
return22 
Forbid22 
(22 
)22 
;22  
}33 
var44 
result44 
=44 
await44 
mediator44 '
.44' (
Send44( ,
(44, -
new44- 0
DeleteUserCommand441 B
{44C D
UserId44E K
=44L M
id44N P
}44Q R
)44R S
;44S T
if55 
(55 
result55 
.55 
	IsSuccess55  
)55  !
{66 
return77 
	NoContent77  
(77  !
)77! "
;77" #
}88 
else99 
{:: 
return;; 

BadRequest;; !
(;;! "
result;;" (
.;;( )
ErrorMessage;;) 5
);;5 6
;;;6 7
}<< 
}== 	
[?? 	
HttpGet??	 
]?? 
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
<@@& '
Result@@' -
<@@- .
List@@. 2
<@@2 3
TransactionDto@@3 A
>@@A B
>@@B C
>@@C D
>@@D E
GetAllUsers@@F Q
(@@Q R
)@@R S
{AA 	
varBB 
resultBB 
=BB 
awaitBB 
mediatorBB '
.BB' (
SendBB( ,
(BB, -
newBB- 0
GetAllUsersQueryBB1 A
(BBA B
)BBB C
)BBC D
;BBD E
ifCC 
(CC 
resultCC 
.CC 
	IsSuccessCC  
)CC  !
{DD 
ifEE 
(EE 
resultEE 
.EE 
DataEE 
==EE  "
nullEE# '
)EE' (
returnEE) /
NotFoundEE0 8
(EE8 9
$strEE9 I
)EEI J
;EEJ K
returnFF 
OkFF 
(FF 
resultFF  
.FF  !
DataFF! %
)FF% &
;FF& '
}GG 
elseHH 
{II 
returnJJ 

BadRequestJJ !
(JJ! "
resultJJ" (
.JJ( )
ErrorMessageJJ) 5
)JJ5 6
;JJ6 7
}KK 
}LL 	
[NN 	
HttpGetNN	 
(NN 
$strNN 
)NN 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
ActionResultOO &
<OO& '
UserDtoOO' .
>OO. /
>OO/ 0
GetUserByIdOO1 <
(OO< =
GuidOO= A
idOOB D
)OOD E
{PP 	
varQQ 
resultQQ 
=QQ 
awaitQQ 
mediatorQQ '
.QQ' (
SendQQ( ,
(QQ, -
newQQ- 0
GetUserByIdQueryQQ1 A
{QQB C
UserIdQQD J
=QQK L
idQQM O
}QQP Q
)QQQ R
;QQR S
ifRR 
(RR 
resultRR 
.RR 
	IsSuccessRR  
)RR  !
{SS 
ifTT 
(TT 
resultTT 
.TT 
DataTT 
==TT  "
nullTT# '
)TT' (
returnTT) /
NotFoundTT0 8
(TT8 9
$"TT9 ;
$strTT; J
{TTJ K
idTTK M
}TTM N
$strTTN X
"TTX Y
)TTY Z
;TTZ [
returnUU 
OkUU 
(UU 
resultUU  
.UU  !
DataUU! %
)UU% &
;UU& '
}VV 
elseWW 
{XX 
returnYY 

BadRequestYY !
(YY! "
resultYY" (
.YY( )
ErrorMessageYY) 5
)YY5 6
;YY6 7
}ZZ 
}[[ 	
private]] 
bool]] 
IsUserAuthorized]] %
(]]% &
Guid]]& *
userId]]+ 1
)]]1 2
{^^ 	
var__ 
currentUserId__ 
=__ 
User__  $
.__$ %
FindFirstValue__% 3
(__3 4

ClaimTypes__4 >
.__> ?
NameIdentifier__? M
)__M N
;__N O
return`` 
currentUserId``  
!=``! #
null``$ (
&&``) +
currentUserId``, 9
==``: <
userId``= C
.``C D
ToString``D L
(``L M
)``M N
;``N O
}aa 	
}bb 
}cc ªÅ
fC:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\TransactionsController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class "
TransactionsController '
:( )
ControllerBase* 8
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
private 
readonly &
IPropertyListingRepository 3%
propertyListingRepository4 M
;M N
private 
readonly 
IMapper  
mapper! '
;' (
public "
TransactionsController %
(% &
	IMediator& /
mediator0 8
,8 9"
ITransactionRepository: P!
transactionRepositoryQ f
,f g'
IPropertyListingRepository	h Ç'
propertyListingRepository
É ú
,
ú ù
IMapper
û •
mapper
¶ ¨
)
¨ ≠
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
this 
. %
propertyListingRepository *
=+ ,%
propertyListingRepository- F
;F G
this 
. 
mapper 
= 
mapper  
;  !
} 	
[ 	
HttpPost	 
] 
public   
async   
Task   
<   
ActionResult   &
<  & '
Guid  ' +
>  + ,
>  , -
AddTransaction  . <
(  < =
[  = >
FromBody  > F
]  F G$
CreateTransactionCommand  H `
command  a h
)  h i
{!! 	
if"" 
("" 
!"" 
IsUserAuthorized"" !
(""! "
command""" )
."") *
BuyerId""* 1
)""1 2
)""2 3
{## 
return$$ 
Forbid$$ 
($$ 
)$$ 
;$$  
}%% 
var'' 
propertyListing'' 
=''  !
await''" '%
propertyListingRepository''( A
.''A B
GetListingByIdAsync''B U
(''U V
command''V ]
.''] ^

PropertyId''^ h
)''h i
;''i j
if(( 
((( 
!(( 
propertyListing((  
.((  !
	IsSuccess((! *
)((* +
{)) 
return** 

BadRequest** !
(**! "
propertyListing**" 1
.**1 2
ErrorMessage**2 >
)**> ?
;**? @
}++ 
if-- 
(-- 
propertyListing-- 
.-- 
Data-- #
.--# $
UserID--$ *
!=--+ -
command--. 5
.--5 6
SellerId--6 >
)--> ?
{.. 
return// 

BadRequest// !
(//! "
$str//" F
)//F G
;//G H
}00 
var22 (
updatePropertyListingCommand22 ,
=22- .
mapper22/ 5
.225 6
Map226 9
<229 :(
UpdatePropertyListingCommand22: V
>22V W
(22W X
propertyListing22X g
.22g h
Data22h l
)22l m
;22m n(
updatePropertyListingCommand33 (
.33( )
Status33) /
=330 1
$str332 8
;338 9
await44 
mediator44 
.44 
Send44 
(44  (
updatePropertyListingCommand44  <
)44< =
;44= >
var66 
transactionId66 
=66 
await66  %
mediator66& .
.66. /
Send66/ 3
(663 4
command664 ;
)66; <
;66< =
return77 
CreatedAtAction77 "
(77" #
nameof77# )
(77) *
AddTransaction77* 8
)778 9
,779 :
new77; >
{77? @
id77A C
=77D E
transactionId77F S
}77T U
,77U V
transactionId77W d
)77d e
;77e f
}88 	
[:: 	
HttpPut::	 
(:: 
$str:: 
):: 
]:: 
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
UpdateTransaction;;) :
(;;: ;
Guid;;; ?
id;;@ B
,;;B C$
UpdateTransactionCommand;;D \
command;;] d
);;d e
{<< 	
if== 
(== 
id== 
!=== 
command== 
.== 
TransactionId== +
)==+ ,
{>> 
return?? 

BadRequest?? !
(??! "
$str??" S
)??S T
;??T U
}@@ 
varAA 
resultAA 
=AA 
awaitAA 
mediatorAA '
.AA' (
SendAA( ,
(AA, -
commandAA- 4
)AA4 5
;AA5 6
ifBB 
(BB 
resultBB 
.BB 
	IsSuccessBB  
)BB  !
{CC 
returnDD 
	NoContentDD  
(DD  !
)DD! "
;DD" #
}EE 
elseFF 
{GG 
returnHH 

BadRequestHH !
(HH! "
resultHH" (
.HH( )
ErrorMessageHH) 5
)HH5 6
;HH6 7
}II 
}JJ 	
[LL 	

HttpDeleteLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
DeleteTransactionMM) :
(MM: ;
GuidMM; ?
idMM@ B
)MMB C
{NN 	
varOO 
resultOO 
=OO 
awaitOO 
mediatorOO '
.OO' (
SendOO( ,
(OO, -
newOO- 0$
DeleteTransactionCommandOO1 I
{OOJ K
TransactionIdOOL Y
=OOY Z
idOO[ ]
}OO^ _
)OO_ `
;OO` a
ifPP 
(PP 
resultPP 
.PP 
	IsSuccessPP  
)PP  !
{QQ 
returnRR 
	NoContentRR  
(RR  !
)RR! "
;RR" #
}SS 
elseTT 
{UU 
returnVV 

BadRequestVV !
(VV! "
resultVV" (
.VV( )
ErrorMessageVV) 5
)VV5 6
;VV6 7
}WW 
}XX 	
[ZZ 	
HttpGetZZ	 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
ActionResult[[ &
<[[& '
Result[[' -
<[[- .
List[[. 2
<[[2 3
TransactionDto[[3 A
>[[A B
>[[B C
>[[C D
>[[D E
GetAllTransactions[[F X
([[X Y
)[[Y Z
{\\ 	
var]] 
result]] 
=]] 
await]] 
mediator]] '
.]]' (
Send]]( ,
(]], -
new]]- 0#
GetAllTransactionsQuery]]1 H
(]]H I
)]]I J
)]]J K
;]]K L
if^^ 
(^^ 
result^^ 
.^^ 
	IsSuccess^^  
)^^  !
{__ 
if`` 
(`` 
result`` 
.`` 
Data`` 
==``  "
null``# '
)``' (
{aa 
returnbb 
NotFoundbb #
(bb# $
$strbb$ ;
)bb; <
;bb< =
}cc 
returndd 
Okdd 
(dd 
resultdd  
.dd  !
Datadd! %
)dd% &
;dd& '
}ee 
elseff 
{gg 
returnhh 

BadRequesthh !
(hh! "
resulthh" (
.hh( )
ErrorMessagehh) 5
)hh5 6
;hh6 7
}ii 
}jj 	
[ll 	
HttpGetll	 
(ll 
$strll 
)ll 
]ll 
publicmm 
asyncmm 
Taskmm 
<mm 
ActionResultmm &
<mm& '
TransactionDtomm' 5
>mm5 6
>mm6 7
GetTransactionByIdmm8 J
(mmJ K
GuidmmK O
idmmP R
)mmR S
{nn 	
varoo 
resultoo 
=oo 
awaitoo 
mediatoroo '
.oo' (
Sendoo( ,
(oo, -
newoo- 0#
GetTransactionByIdQueryoo1 H
{ooI J
TransactionIdooK X
=ooY Z
idoo[ ]
}oo^ _
)oo_ `
;oo` a
ifpp 
(pp 
resultpp 
.pp 
	IsSuccesspp  
)pp  !
{qq 
ifrr 
(rr 
resultrr 
.rr 
Datarr 
==rr  "
nullrr# '
)rr' (
{ss 
returntt 
NotFoundtt #
(tt# $
$"tt$ &
$strtt& :
{tt: ;
idtt; =
}tt= >
$strtt> H
"ttH I
)ttI J
;ttJ K
}uu 
returnvv 
Okvv 
(vv 
resultvv  
.vv  !
Datavv! %
)vv% &
;vv& '
}ww 
elsexx 
{yy 
returnzz 

BadRequestzz !
(zz! "
resultzz" (
.zz( )
ErrorMessagezz) 5
)zz5 6
;zz6 7
}{{ 
}|| 	
[~~ 	
HttpGet~~	 
(~~ 
$str~~  
)~~  !
]~~! "
public 
async 
Task 
< 
ActionResult &
<& '
TransactionDto' 5
>5 6
>6 7&
GetTransactionByPropertyId8 R
(R S
GuidS W
idX Z
)Z [
{
ÄÄ 	
var
ÅÅ 
result
ÅÅ 
=
ÅÅ 
await
ÅÅ 
mediator
ÅÅ '
.
ÅÅ' (
Send
ÅÅ( ,
(
ÅÅ, -
new
ÅÅ- 0-
GetTransactionByPropertyIdQuery
ÅÅ1 P
{
ÅÅQ R

PropertyId
ÅÅS ]
=
ÅÅ^ _
id
ÅÅ` b
}
ÅÅc d
)
ÅÅd e
;
ÅÅe f
if
ÇÇ 
(
ÇÇ 
result
ÇÇ 
.
ÇÇ 
	IsSuccess
ÇÇ  
)
ÇÇ  !
{
ÉÉ 
if
ÑÑ 
(
ÑÑ 
result
ÑÑ 
.
ÑÑ 
Data
ÑÑ 
==
ÑÑ  "
null
ÑÑ# '
)
ÑÑ' (
{
ÖÖ 
return
ÜÜ 
NotFound
ÜÜ #
(
ÜÜ# $
$"
ÜÜ$ &
$str
ÜÜ& C
{
ÜÜC D
id
ÜÜD F
}
ÜÜF G
$str
ÜÜG Q
"
ÜÜQ R
)
ÜÜR S
;
ÜÜS T
}
áá 
return
àà 
Ok
àà 
(
àà 
result
àà  
.
àà  !
Data
àà! %
)
àà% &
;
àà& '
}
ââ 
else
ää 
{
ãã 
return
åå 
NotFound
åå 
(
åå  
)
åå  !
;
åå! "
}
çç 
}
éé 	
[
êê 	
HttpGet
êê	 
(
êê 
$str
êê 
)
êê 
]
êê 
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
ActionResult
ëë &
<
ëë& '
Result
ëë' -
<
ëë- .
PagedResult
ëë. 9
<
ëë9 :
TransactionDto
ëë: H
>
ëëH I
>
ëëI J
>
ëëJ K
>
ëëK L&
GetTransactionsByBuyerId
ëëM e
(
ëëe f
Guid
ëëf j
id
ëëk m
,
ëëm n
[
ëëo p
	FromQuery
ëëp y
]
ëëy z
int
ëë{ ~
pageëë É
=ëëÑ Ö
$numëëÜ á
,ëëá à
[ëëâ ä
	FromQueryëëä ì
]ëëì î
intëëï ò
pageSizeëëô °
=ëë¢ £
$numëë§ ¶
)ëë¶ ß
{
íí 	
var
ìì 
result
ìì 
=
ìì 
await
ìì 
mediator
ìì '
.
ìì' (
Send
ìì( ,
(
ìì, -
new
ìì- 0+
GetTransactionsByBuyerIdQuery
ìì1 N
{
ììO P
BuyerId
ììQ X
=
ììY Z
id
ìì[ ]
,
ìì] ^
Page
ìì_ c
=
ììd e
page
ììf j
,
ììj k
PageSize
ììl t
=
ììu v
pageSize
ììw 
}ììÄ Å
)ììÅ Ç
;ììÇ É
if
îî 
(
îî 
result
îî 
.
îî 
	IsSuccess
îî  
)
îî  !
{
ïï 
if
ññ 
(
ññ 
result
ññ 
.
ññ 
Data
ññ 
==
ññ  "
null
ññ# '
)
ññ' (
{
óó 
return
òò 
NotFound
òò #
(
òò# $
$"
òò$ &
$str
òò& @
{
òò@ A
id
òòA C
}
òòC D
$str
òòD N
"
òòN O
)
òòO P
;
òòP Q
}
ôô 
return
öö 
Ok
öö 
(
öö 
result
öö  
.
öö  !
Data
öö! %
)
öö% &
;
öö& '
}
õõ 
else
úú 
{
ùù 
return
ûû 
NotFound
ûû 
(
ûû  
)
ûû  !
;
ûû! "
}
üü 
}
†† 	
[
¢¢ 	
HttpGet
¢¢	 
(
¢¢ 
$str
¢¢ 
)
¢¢ 
]
¢¢  
public
££ 
async
££ 
Task
££ 
<
££ 
ActionResult
££ &
<
££& '
Result
££' -
<
££- .
PagedResult
££. 9
<
££9 :
TransactionDto
££: H
>
££H I
>
££I J
>
££J K
>
££K L'
GetTransactionsBySellerId
££M f
(
££f g
Guid
££g k
id
££l n
,
££n o
[
££p q
	FromQuery
££q z
]
££z {
int
££| 
page££Ä Ñ
=££Ö Ü
$num££á à
,££à â
[££ä ã
	FromQuery££ã î
]££î ï
int££ñ ô
pageSize££ö ¢
=£££ §
$num££• ß
)££ß ®
{
§§ 	
var
•• 
result
•• 
=
•• 
await
•• 
mediator
•• '
.
••' (
Send
••( ,
(
••, -
new
••- 0,
GetTransactionsBySellerIdQuery
••1 O
{
••P Q
SellerId
••R Z
=
••[ \
id
••] _
,
••_ `
Page
••a e
=
••f g
page
••h l
,
••l m
PageSize
••n v
=
••w x
pageSize••y Å
}••Ç É
)••É Ñ
;••Ñ Ö
if
¶¶ 
(
¶¶ 
result
¶¶ 
.
¶¶ 
	IsSuccess
¶¶  
)
¶¶  !
{
ßß 
if
®® 
(
®® 
result
®® 
.
®® 
Data
®® 
==
®®  "
null
®®# '
)
®®' (
{
©© 
return
™™ 
NotFound
™™ #
(
™™# $
$"
™™$ &
$str
™™& A
{
™™A B
id
™™B D
}
™™D E
$str
™™E O
"
™™O P
)
™™P Q
;
™™Q R
}
´´ 
return
¨¨ 
Ok
¨¨ 
(
¨¨ 
result
¨¨  
.
¨¨  !
Data
¨¨! %
)
¨¨% &
;
¨¨& '
}
≠≠ 
else
ÆÆ 
{
ØØ 
return
∞∞ 
NotFound
∞∞ 
(
∞∞  
)
∞∞  !
;
∞∞! "
}
±± 
}
≤≤ 	
private
¥¥ 
bool
¥¥ 
IsUserAuthorized
¥¥ %
(
¥¥% &
Guid
¥¥& *
userId
¥¥+ 1
)
¥¥1 2
{
µµ 	
var
∂∂ 
currentUserId
∂∂ 
=
∂∂ 
User
∂∂  $
.
∂∂$ %
FindFirstValue
∂∂% 3
(
∂∂3 4

ClaimTypes
∂∂4 >
.
∂∂> ?
NameIdentifier
∂∂? M
)
∂∂M N
;
∂∂N O
return
∑∑ 
currentUserId
∑∑  
!=
∑∑! #
null
∑∑$ (
&&
∑∑) +
currentUserId
∑∑, 9
==
∑∑: <
userId
∑∑= C
.
∑∑C D
ToString
∑∑D L
(
∑∑L M
)
∑∑M N
;
∑∑N O
}
∏∏ 	
}
ππ 
}∫∫ Ãv
jC:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\PropertyListingsController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class &
PropertyListingsController +
:, -
ControllerBase. <
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public &
PropertyListingsController )
() *
	IMediator* 3
mediator4 <
)< =
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpPost	 
] 
[ 	
	Authorize	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Result' -
<- .
Guid. 2
>2 3
>3 4
>4 5!
CreatePropertyListing6 K
(K L(
CreatePropertyListingCommandL h
commandi p
)p q
{ 	
if 
( 
! 
IsUserAuthorized !
(! "
command" )
.) *
UserID* 0
)0 1
)1 2
{ 
return 
Forbid 
( 
) 
;  
}   
var"" 
result"" 
="" 
await"" 
mediator"" '
.""' (
Send""( ,
("", -
command""- 4
)""4 5
;""5 6
if$$ 
($$ 
result$$ 
.$$ 
	IsSuccess$$  
)$$  !
{%% 
return&& 
Ok&& 
(&& 
result&&  
.&&  !
Data&&! %
)&&% &
;&&& '
}'' 
else(( 
{)) 
return** 

BadRequest** !
(**! "
result**" (
.**( )
ErrorMessage**) 5
)**5 6
;**6 7
}++ 
},, 	
[.. 	
HttpPut..	 
(.. 
$str.. 
).. 
].. 
[// 	
	Authorize//	 
]// 
public00 
async00 
Task00 
<00 
ActionResult00 &
<00& '
Result00' -
<00- .
Unit00. 2
>002 3
>003 4
>004 5!
UpdatePropertyListing006 K
(00K L
Guid00L P
id00Q S
,00S T(
UpdatePropertyListingCommand00U q
command00r y
)00y z
{11 	
if22 
(22 
id22 
!=22 
command22 
.22 

PropertyId22 (
)22( )
{33 
return44 

BadRequest44 !
(44! "
)44" #
;44# $
}55 
if77 
(77 
!77 
IsUserAuthorized77 !
(77! "
command77" )
.77) *
UserID77* 0
)770 1
)771 2
{88 
return99 
Forbid99 
(99 
)99 
;99  
}:: 
if<< 
(<< 
!<< +
DoesPropertyListingBelongToUser<< 0
(<<0 1
id<<1 3
)<<3 4
)<<4 5
{== 
return>> 
Forbid>> 
(>> 
)>> 
;>>  
}?? 
varAA 
resultAA 
=AA 
awaitAA 
mediatorAA '
.AA' (
SendAA( ,
(AA, -
commandAA- 4
)AA4 5
;AA5 6
ifBB 
(BB 
resultBB 
.BB 
	IsSuccessBB  
)BB  !
{CC 
returnDD 
	NoContentDD  
(DD  !
)DD! "
;DD" #
}EE 
elseFF 
{GG 
returnHH 

BadRequestHH !
(HH! "
resultHH" (
.HH( )
ErrorMessageHH) 5
)HH5 6
;HH6 7
}II 
}JJ 	
[LL 	
HttpGetLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
ActionResultMM &
<MM& '
PropertyListingDtoMM' 9
>MM9 :
>MM: ;
GetListingByIdAsyncMM< O
(MMO P
GuidMMP T
idMMU W
)MMW X
{NN 	
varOO 
resultOO 
=OO 
awaitOO 
mediatorOO '
.OO' (
SendOO( ,
(OO, -
newOO- 0
GetListingByIdQueryOO1 D
{OOE F

PropertyIdOOG Q
=OOR S
idOOT V
}OOW X
)OOX Y
;OOY Z
ifPP 
(PP 
resultPP 
.PP 
	IsSuccessPP  
)PP  !
{QQ 
ifRR 
(RR 
resultRR 
.RR 
DataRR 
==RR  "
nullRR# '
)RR' (
{SS 
returnTT 
NotFoundTT #
(TT# $
$"TT$ &
$strTT& 8
{TT8 9
idTT9 ;
}TT; <
$strTT< F
"TTF G
)TTG H
;TTH I
}UU 
returnVV 
OkVV 
(VV 
resultVV  
.VV  !
DataVV! %
)VV% &
;VV& '
}WW 
elseXX 
{YY 
returnZZ 

BadRequestZZ !
(ZZ! "
resultZZ" (
.ZZ( )
ErrorMessageZZ) 5
)ZZ5 6
;ZZ6 7
}[[ 
}]] 	
[__ 	
HttpGet__	 
]__ 
public`` 
async`` 
Task`` 
<`` 
ActionResult`` &
<``& '
List``' +
<``+ ,
PropertyListingDto``, >
>``> ?
>``? @
>``@ A'
GetAllPropertyListingsAsync``B ]
(``] ^
)``^ _
{aa 	
varbb 
resultbb 
=bb 
awaitbb 
mediatorbb '
.bb' (
Sendbb( ,
(bb, -
newbb- 0&
GetAllPropertyListingQuerybb1 K
(bbK L
)bbL M
)bbM N
;bbN O
ifcc 
(cc 
resultcc 
.cc 
	IsSuccesscc  
)cc  !
{dd 
ifee 
(ee 
resultee 
.ee 
Dataee 
==ee  "
nullee# '
)ee' (
returnee) /
NotFoundee0 8
(ee8 9
$stree9 L
)eeL M
;eeM N
returnff 
Okff 
(ff 
resultff  
.ff  !
Dataff! %
)ff% &
;ff& '
}gg 
elsehh 
{ii 
returnjj 

BadRequestjj !
(jj! "
resultjj" (
.jj( )
ErrorMessagejj) 5
)jj5 6
;jj6 7
}kk 
}ll 	
[nn 	
HttpGetnn	 
(nn 
$strnn %
)nn% &
]nn& '
publicoo 
asyncoo 
Taskoo 
<oo 
ActionResultoo &
<oo& '
Listoo' +
<oo+ ,
PropertyListingDtooo, >
>oo> ?
>oo? @
>oo@ A
GetListingsByUserIdooB U
(ooU V
GuidooV Z
userIdoo[ a
)ooa b
{pp 	
varqq 
resultqq 
=qq 
awaitqq 
mediatorqq '
.qq' (
Sendqq( ,
(qq, -
newqq- 0$
GetListingsByUserIdQueryqq1 I
{qqJ K
UserIdqqL R
=qqS T
userIdqqU [
}qq\ ]
)qq] ^
;qq^ _
ifrr 
(rr 
resultrr 
.rr 
	IsSuccessrr  
)rr  !
{ss 
iftt 
(tt 
resulttt 
.tt 
Datatt 
==tt  "
nulltt# '
)tt' (
returntt) /
NotFoundtt0 8
(tt8 9
$"tt9 ;
$strtt; ^
{tt^ _
userIdtt_ e
}tte f
"ttf g
)ttg h
;tth i
returnuu 
Okuu 
(uu 
resultuu  
.uu  !
Datauu! %
)uu% &
;uu& '
}vv 
elseww 
{xx 
returnyy 

BadRequestyy !
(yy! "
resultyy" (
.yy( )
ErrorMessageyy) 5
)yy5 6
;yy6 7
}zz 
}{{ 	
[}} 	

HttpDelete}}	 
(}} 
$str}} 
)}}  
]}}  !
[~~ 	
	Authorize~~	 
]~~ 
public 
async 
Task 
< 
IActionResult '
>' (!
DeletePropertyListing) >
(> ?
Guid? C
idD F
)F G
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
!
ÅÅ -
DoesPropertyListingBelongToUser
ÅÅ /
(
ÅÅ/ 0
id
ÅÅ0 2
)
ÅÅ2 3
)
ÅÅ3 4
{
ÇÇ 
return
ÉÉ 
Forbid
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ  
}
ÑÑ 
var
ÖÖ 
result
ÖÖ 
=
ÖÖ 
await
ÖÖ 
mediator
ÖÖ '
.
ÖÖ' (
Send
ÖÖ( ,
(
ÖÖ, -
new
ÖÖ- 0*
DeletePropertyListingCommand
ÖÖ1 M
{
ÖÖN O

PropertyId
ÖÖP Z
=
ÖÖ[ \
id
ÖÖ] _
}
ÖÖ` a
)
ÖÖa b
;
ÖÖb c
if
ÜÜ 
(
ÜÜ 
result
ÜÜ 
.
ÜÜ 
	IsSuccess
ÜÜ  
)
ÜÜ  !
{
áá 
return
àà 
	NoContent
àà  
(
àà  !
)
àà! "
;
àà" #
}
ââ 
else
ää 
{
ãã 
return
åå 

BadRequest
åå !
(
åå! "
result
åå" (
.
åå( )
ErrorMessage
åå) 5
)
åå5 6
;
åå6 7
}
çç 
}
éé 	
[
êê 	
HttpGet
êê	 
(
êê 
$str
êê 
)
êê 
]
êê 
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
ActionResult
ëë &
<
ëë& '
PagedResult
ëë' 2
<
ëë2 3 
PropertyListingDto
ëë3 E
>
ëëE F
>
ëëF G
>
ëëG H)
GetFilteredPropertyListings
ëëI d
(
ëëd e
[
ëëe f
	FromQuery
ëëf o
]
ëëo p
int
ëëq t
page
ëëu y
,
ëëy z
[
ëë{ |
	FromQueryëë| Ö
]ëëÖ Ü
intëëá ä
pageSizeëëã ì
,ëëì î
[ëëï ñ
	FromQueryëëñ ü
]ëëü †
stringëë° ß
?ëëß ®
Typeëë© ≠
,ëë≠ Æ
[ëëØ ∞
	FromQueryëë∞ π
]ëëπ ∫
doubleëëª ¡
priceëë¬ «
,ëë« »
[ëë…  
	FromQueryëë  ”
]ëë” ‘
doubleëë’ €
nrOfBathroomsëë‹ È
,ëëÈ Í
[ëëÎ Ï
	FromQueryëëÏ ı
]ëëı ˆ
doubleëë˜ ˝
nrOfBedroomsëë˛ ä
,ëëä ã
[ëëå ç
	FromQueryëëç ñ
]ëëñ ó
stringëëò û
?ëëû ü
statusëë† ¶
,ëë¶ ß
[ëë® ©
	FromQueryëë© ≤
]ëë≤ ≥
doubleëë¥ ∫
squareFootageëëª »
)ëë» …
{
íí 	
var
ìì 
query
ìì 
=
ìì 
new
ìì .
 GetFilteredPropertyListingsQuery
ìì <
{
îî 
Page
ïï 
=
ïï 
page
ïï 
,
ïï 
PageSize
ññ 
=
ññ 
pageSize
ññ #
,
ññ# $
Type
óó 
=
óó 
Type
óó 
,
óó 
Price
òò 
=
òò 
price
òò 
,
òò 
NumberOfBathrooms
ôô !
=
ôô" #
nrOfBathrooms
ôô$ 1
,
ôô1 2
NumberOfBedrooms
öö  
=
öö! "
nrOfBedrooms
öö# /
,
öö/ 0
Status
õõ 
=
õõ 
status
õõ 
,
õõ  
SquareFootage
úú 
=
úú 
squareFootage
úú  -
}
ùù 
;
ùù 
var
ûû 
result
ûû 
=
ûû 
await
ûû 
mediator
ûû '
.
ûû' (
Send
ûû( ,
(
ûû, -
query
ûû- 2
)
ûû2 3
;
ûû3 4
return
üü 
Ok
üü 
(
üü 
result
üü 
)
üü 
;
üü 
}
†† 	
private
¢¢ 
bool
¢¢ 
IsUserAuthorized
¢¢ %
(
¢¢% &
Guid
¢¢& *
userId
¢¢+ 1
)
¢¢1 2
{
££ 	
var
§§ 
currentUserId
§§ 
=
§§ 
User
§§  $
.
§§$ %
FindFirstValue
§§% 3
(
§§3 4

ClaimTypes
§§4 >
.
§§> ?
NameIdentifier
§§? M
)
§§M N
;
§§N O
return
•• 
currentUserId
••  
!=
••! #
null
••$ (
&&
••) +
currentUserId
••, 9
==
••: <
userId
••= C
.
••C D
ToString
••D L
(
••L M
)
••M N
;
••N O
}
¶¶ 	
private
®® 
bool
®® -
DoesPropertyListingBelongToUser
®® 4
(
®®4 5
Guid
®®5 9

propertyId
®®: D
)
®®D E
{
©© 	
var
™™ 
currentUserId
™™ 
=
™™ 
User
™™  $
.
™™$ %
FindFirstValue
™™% 3
(
™™3 4

ClaimTypes
™™4 >
.
™™> ?
NameIdentifier
™™? M
)
™™M N
;
™™N O
if
´´ 
(
´´ 
currentUserId
´´ 
==
´´  
null
´´! %
)
´´% &
{
¨¨ 
return
≠≠ 
false
≠≠ 
;
≠≠ 
}
ÆÆ 
var
∞∞ 
listing
∞∞ 
=
∞∞ 
mediator
∞∞ "
.
∞∞" #
Send
∞∞# '
(
∞∞' (
new
∞∞( +!
GetListingByIdQuery
∞∞, ?
{
∞∞@ A

PropertyId
∞∞B L
=
∞∞M N

propertyId
∞∞O Y
}
∞∞Z [
)
∞∞[ \
.
∞∞\ ]
Result
∞∞] c
;
∞∞c d
return
±± 
listing
±± 
.
±± 
	IsSuccess
±± $
&&
±±% '
listing
±±( /
.
±±/ 0
Data
±±0 4
!=
±±5 7
null
±±8 <
&&
±±= ?
listing
±±@ G
.
±±G H
Data
±±H L
.
±±L M
UserID
±±M S
.
±±S T
ToString
±±T \
(
±±\ ]
)
±±] ^
==
±±_ a
currentUserId
±±b o
;
±±o p
}
≤≤ 	
}
≥≥ 
}¥¥ Û
xC:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\PropertyListingPricePredictionController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 4
(PropertyListingPricePredictionController 9
:: ;
ControllerBase< J
{		 
private

 
readonly

 /
#PropertyListingPricePredictionModel

 </
#propertyListingPricePredictionModel

= `
;

` a
public 4
(PropertyListingPricePredictionController 7
(7 8
)8 9
{ 	/
#propertyListingPricePredictionModel /
=0 1
new2 5/
#PropertyListingPricePredictionModel6 Y
(Y Z
)Z [
;[ \
var 
data 
= 
new )
PropertyListingDataAggregator 8
(8 9
)9 :
;: ;
var 

sampleData 
= 
data !
.! ""
GetPropertyListingData" 8
(8 9
)9 :
;: ;/
#propertyListingPricePredictionModel /
./ 0
Train0 5
(5 6

sampleData6 @
)@ A
;A B
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
ActionResult 
< 
float !
>! "
PredictPrice# /
(/ 0
PropertyListingData0 C
propertyListingD S
)S T
{ 	
return /
#propertyListingPricePredictionModel 6
.6 7
Predict7 >
(> ?
propertyListing? N
)N O
;O P
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
float !
>! "
Evaluate# +
(+ ,
), -
{ 	
var 
data 
= 
new )
PropertyListingDataAggregator 8
(8 9
)9 :
;: ;
var 

sampleData 
= 
data !
.! ""
GetPropertyListingData" 8
(8 9
)9 :
;: ;
return /
#propertyListingPricePredictionModel 6
.6 7
Evaluate7 ?
(? @

sampleData@ J
)J K
;K L
} 	
}   
}!! ˆ9
iC:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\ClientInquiriesController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class %
ClientInquiriesController *
:+ ,
ControllerBase- ;
{ 
private 
readonly 
	IMediator "
mediator# +
;+ ,
public %
ClientInquiriesController (
(( )
	IMediator) 2
mediator3 ;
); <
{ 	
this 
. 
mediator 
= 
mediator $
;$ %
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateInquiry) 6
(6 7&
CreateClientInquiryCommand7 Q
commandR Y
)Y Z
{ 	
var 
result 
= 
await 
mediator '
.' (
Send( ,
(, -
command- 4
)4 5
;5 6
if 
( 
result 
. 
	IsSuccess  
)  !
{ 
return 
Ok 
( 
result  
.  !
Data! %
)% &
;& '
} 
return 

BadRequest 
( 
result $
.$ %
ErrorMessage% 1
)1 2
;2 3
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetInquiryById) 7
(7 8
Guid8 <
id= ?
)? @
{ 	
var   
result   
=   
await   
mediator   '
.  ' (
Send  ( ,
(  , -
new  - 0
GetInquiryByIdQuery  1 D
{  E F
	InquiryId  G P
=  Q R
id  S U
}  V W
)  W X
;  X Y
return!! 
Ok!! 
(!! 
result!! 
)!! 
;!! 
}"" 	
[## 	
HttpGet##	 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
ActionResult$$ &
<$$& '
List$$' +
<$$+ ,
PropertyListingDto$$, >
>$$> ?
>$$? @
>$$@ A 
GetAllInquiriesAsync$$B V
($$V W
)$$W X
{%% 	
var&& 
result&& 
=&& 
await&& 
mediator&& '
.&&' (
Send&&( ,
(&&, -
new&&- 0 
GetAllInquiriesQuery&&1 E
(&&E F
)&&F G
)&&G H
;&&H I
return'' 
Ok'' 
('' 
result'' 
)'' 
;'' 
}(( 	
[)) 	
HttpGet))	 
()) 
$str)) )
)))) *
]))* +
public** 
async** 
Task** 
<** 
ActionResult** &
<**& '
List**' +
<**+ ,
ClientInquiryDto**, <
>**< =
>**= >
>**> ?"
GetInquiriesByClientId**@ V
(**V W
Guid**W [
clientId**\ d
)**d e
{++ 	
var,, 
result,, 
=,, 
await,, 
mediator,, '
.,,' (
Send,,( ,
(,,, -
new,,- 0%
GetInquiryByClientIdQuery,,1 J
{,,K L
ClientId,,M U
=,,V W
clientId,,X `
},,a b
),,b c
;,,c d
return-- 
Ok-- 
(-- 
result-- 
)-- 
;-- 
}.. 	
[11 	
HttpPut11	 
(11 
$str11 
)11 
]11 
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
UpdateInquiry22) 6
(226 7
Guid227 ;
id22< >
,22> ?&
UpdateClientInquiryCommand22@ Z
command22[ b
)22b c
{33 	
if44 
(44 
id44 
!=44 
command44 
.44 
	InquiryId44 &
)44& '
{55 
return66 

BadRequest66 !
(66! "
$str66" 8
)668 9
;669 :
}77 
var88 
result88 
=88 
await88 
mediator88 '
.88' (
Send88( ,
(88, -
command88- 4
)884 5
;885 6
if99 
(99 
result99 
.99 
	IsSuccess99  
)99  !
{:: 
return;; 
Ok;; 
(;; 
result;;  
.;;  !
Data;;! %
);;% &
;;;& '
}<< 
return== 

BadRequest== 
(== 
result== $
.==$ %
ErrorMessage==% 1
)==1 2
;==2 3
}>> 	
[@@ 	

HttpDelete@@	 
(@@ 
$str@@ 
)@@  
]@@  !
publicAA 
asyncAA 
TaskAA 
<AA 
IActionResultAA '
>AA' (
DeleteInquiryAA) 6
(AA6 7
GuidAA7 ;
idAA< >
)AA> ?
{BB 	
varCC 
resultCC 
=CC 
awaitCC 
mediatorCC '
.CC' (
SendCC( ,
(CC, -
newCC- 0&
DeleteClientInquiryCommandCC1 K
{CCL M
	InquiryIdCCN W
=CCX Y
idCCZ \
}CC] ^
)CC^ _
;CC_ `
ifDD 
(DD 
resultDD 
.DD 
	IsSuccessDD  
)DD  !
{EE 
returnFF 
OkFF 
(FF 
resultFF  
.FF  !
DataFF! %
)FF% &
;FF& '
}GG 
returnHH 

BadRequestHH 
(HH 
resultHH $
.HH$ %
ErrorMessageHH% 1
)HH1 2
;HH2 3
}II 	
[KK 	
HttpGetKK	 
(KK 
$strKK 
)KK 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
ActionResultLL &
<LL& '
ListLL' +
<LL+ ,
PropertyListingDtoLL, >
>LL> ?
>LL? @
>LL@ A$
SearchAllPropertiesAsyncLLB Z
(LLZ [
stringLL[ a
searchQueryLLb m
)LLm n
{MM 	
varNN 
resultNN 
=NN 
awaitNN 
mediatorNN '
.NN' (
SendNN( ,
(NN, -
newNN- 0$
SearchAllPropertiesQueryNN1 I
{NNJ K
SearchQueryNNL W
=NNX Y
searchQueryNNZ e
}NNf g
)NNg h
;NNh i
returnOO 
OkOO 
(OO 
resultOO 
)OO 
;OO 
}PP 	
}QQ 
}RR é
^C:\Users\cezar\desktop\RealEstateManagement\RealEstateManagement\Controllers\AuthController.cs
	namespace 	 
RealEstateManagement
 
. 
Controllers *
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
AuthController		 
:		  !
ControllerBase		" 0
{

 
private 
readonly 
	IMediator "
	_mediator# ,
;, -
public 
AuthController 
( 
	IMediator '
mediator( 0
)0 1
{ 	
	_mediator 
= 
mediator  
;  !
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Result' -
<- .
Guid. 2
>2 3
>3 4
>4 5
Register6 >
(> ?
RegisterUserCommand? R
commandS Z
)Z [
{ 	
var 
result 
= 
await 
	_mediator (
.( )
Send) -
(- .
command. 5
)5 6
;6 7
if 
( 
result 
. 
	IsSuccess  
)  !
{ 
return 
Ok 
( 
new 
{ 
UserId  &
=' (
result) /
./ 0
Data0 4
}5 6
)6 7
;7 8
} 
else 
{ 
return 

BadRequest !
(! "
result" (
.( )
ErrorMessage) 5
)5 6
;6 7
} 
} 	
[   	
HttpPost  	 
(   
$str   
)   
]   
public!! 
async!! 
Task!! 
<!! 
ActionResult!! &
<!!& '
Result!!' -
<!!- .
string!!. 4
>!!4 5
>!!5 6
>!!6 7
Login!!8 =
(!!= >
LoginUserCommand!!> N
command!!O V
)!!V W
{"" 	
var## 
result## 
=## 
await## 
	_mediator## (
.##( )
Send##) -
(##- .
command##. 5
)##5 6
;##6 7
if$$ 
($$ 
result$$ 
.$$ 
	IsSuccess$$  
)$$  !
{%% 
return&& 
Ok&& 
(&& 
new&& 
{&& 
Token&&  %
=&&& '
result&&( .
.&&. /
Data&&/ 3
}&&4 5
)&&5 6
;&&6 7
}'' 
else(( 
{)) 
return** 

BadRequest** !
(**! "
result**" (
.**( )
ErrorMessage**) 5
)**5 6
;**6 7
}++ 
},, 	
}-- 
}.. 