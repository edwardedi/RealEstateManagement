®B
YC:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Repositories\UserRepository.cs
	namespace 	
Infrastructure
 
. 
Repositories %
{ 
public		 

class		 
UserRepository		 
:		  !
IUserRepository		" 1
{

 
private 
readonly  
ApplicationDbContext -
context. 5
;5 6
public 
UserRepository 
(  
ApplicationDbContext 2
context3 :
): ;
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
async 
Task 
< 
Result  
<  !
IEnumerable! ,
<, -
User- 1
>1 2
>2 3
>3 4
GetAllUsersAsync5 E
(E F
)F G
{ 	
try 
{ 
var 
users 
= 
await !
context" )
.) *
Users* /
./ 0
ToListAsync0 ;
(; <
)< =
;= >
return 
Result 
< 
IEnumerable )
<) *
User* .
>. /
>/ 0
.0 1
Success1 8
(8 9
users9 >
)> ?
;? @
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 
Result 
< 
IEnumerable )
<) *
User* .
>. /
>/ 0
.0 1
Failure1 8
(8 9
$"9 ;
$str; e
{e f
exf h
.h i
Messagei p
}p q
"q r
)r s
;s t
} 
} 	
public 
async 
Task 
< 
Result  
<  !
User! %
>% &
>& '
GetUserByIdAsync( 8
(8 9
Guid9 =
id> @
)@ A
{ 	
try 
{ 
var   
user   
=   
await    
context  ! (
.  ( )
Users  ) .
.  . /
	FindAsync  / 8
(  8 9
id  9 ;
)  ; <
;  < =
if!! 
(!! 
user!! 
==!! 
null!!  
)!!  !
{"" 
return## 
Result## !
<##! "
User##" &
>##& '
.##' (
Failure##( /
(##/ 0
$str##0 A
)##A B
;##B C
}$$ 
return%% 
Result%% 
<%% 
User%% "
>%%" #
.%%# $
Success%%$ +
(%%+ ,
user%%, 0
)%%0 1
;%%1 2
}&& 
catch'' 
('' 
	Exception'' 
ex'' 
)''  
{(( 
return)) 
Result)) 
<)) 
User)) "
>))" #
.))# $
Failure))$ +
())+ ,
$")), .
$str)). W
{))W X
ex))X Z
.))Z [
Message))[ b
}))b c
"))c d
)))d e
;))e f
}** 
},, 	
public-- 
async-- 
Task-- 
<-- 
Result--  
<--  !
Guid--! %
>--% &
>--& '
AddUserAsync--( 4
(--4 5
User--5 9
user--: >
)--> ?
{.. 	
try// 
{00 
await11 
context11 
.11 
Users11 #
.11# $
AddAsync11$ ,
(11, -
user11- 1
)111 2
;112 3
await22 
context22 
.22 
SaveChangesAsync22 .
(22. /
)22/ 0
;220 1
return33 
Result33 
<33 
Guid33 "
>33" #
.33# $
Success33$ +
(33+ ,
user33, 0
.330 1
UserId331 7
)337 8
;338 9
}44 
catch55 
(55 
	Exception55 
ex55 
)55  
{66 
return77 
Result77 
<77 
Guid77 "
>77" #
.77# $
Failure77$ +
(77+ ,
$"77, .
$str77. U
{77U V
ex77V X
.77X Y
Message77Y `
}77` a
"77a b
)77b c
;77c d
}88 
}99 	
public:: 
async:: 
Task:: 
<:: 
Result::  
<::  !
Guid::! %
>::% &
>::& '
UpdateUserAsync::( 7
(::7 8
User::8 <
user::= A
)::A B
{;; 	
try<< 
{== 
var>> 
existingUser>>  
=>>! "
await>># (
context>>) 0
.>>0 1
Users>>1 6
.>>6 7
	FindAsync>>7 @
(>>@ A
user>>A E
.>>E F
UserId>>F L
)>>L M
;>>M N
if?? 
(?? 
existingUser??  
!=??! #
null??$ (
)??( )
{@@ 
contextAA 
.AA 
EntryAA !
(AA! "
existingUserAA" .
)AA. /
.AA/ 0
CurrentValuesAA0 =
.AA= >
	SetValuesAA> G
(AAG H
userAAH L
)AAL M
;AAM N
awaitBB 
contextBB !
.BB! "
SaveChangesAsyncBB" 2
(BB2 3
)BB3 4
;BB4 5
returnDD 
ResultDD !
<DD! "
GuidDD" &
>DD& '
.DD' (
SuccessDD( /
(DD/ 0
userDD0 4
.DD4 5
UserIdDD5 ;
)DD; <
;DD< =
}EE 
elseFF 
{GG 
returnHH 
ResultHH !
<HH! "
GuidHH" &
>HH& '
.HH' (
FailureHH( /
(HH/ 0
$strHH0 A
)HHA B
;HHB C
}II 
}JJ 
catchKK 
(KK 
	ExceptionKK 
exKK 
)KK  
{LL 
returnMM 
ResultMM 
<MM 
GuidMM "
>MM" #
.MM# $
FailureMM$ +
(MM+ ,
$"MM, .
$strMM. U
{MMU V
exMMV X
.MMX Y
MessageMMY `
}MM` a
"MMa b
)MMb c
;MMc d
}NN 
}OO 	
publicPP 
asyncPP 
TaskPP 
<PP 
ResultPP  
<PP  !
GuidPP! %
>PP% &
>PP& '
DeleteUserAsyncPP( 7
(PP7 8
GuidPP8 <
idPP= ?
)PP? @
{QQ 	
tryRR 
{SS 
varTT 
userTT 
=TT 
awaitTT  
contextTT! (
.TT( )
UsersTT) .
.TT. /
	FindAsyncTT/ 8
(TT8 9
idTT9 ;
)TT; <
;TT< =
ifUU 
(UU 
userUU 
!=UU 
nullUU  
)UU  !
{VV 
contextWW 
.WW 
UsersWW !
.WW! "
RemoveWW" (
(WW( )
userWW) -
)WW- .
;WW. /
awaitXX 
contextXX !
.XX! "
SaveChangesAsyncXX" 2
(XX2 3
)XX3 4
;XX4 5
returnYY 
ResultYY !
<YY! "
GuidYY" &
>YY& '
.YY' (
SuccessYY( /
(YY/ 0
idYY0 2
)YY2 3
;YY3 4
}ZZ 
return[[ 
Result[[ 
<[[ 
Guid[[ "
>[[" #
.[[# $
Failure[[$ +
([[+ ,
$str[[, <
)[[< =
;[[= >
}\\ 
catch]] 
(]] 
	Exception]] 
ex]] 
)]]  
{^^ 
return__ 
Result__ 
<__ 
Guid__ "
>__" #
.__# $
Failure__$ +
(__+ ,
ex__, .
.__. /
InnerException__/ =
!__= >
.__> ?
ToString__? G
(__G H
)__H I
)__I J
;__J K
}`` 
}aa 	
}bb 
}cc ≤i
`C:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Repositories\TransactionRepository.cs
	namespace 	
Infrastructure
 
. 
Repositories %
{ 
public		 

class		 !
TransactionRepository		 &
:		' ("
ITransactionRepository		) ?
{

 
private 
readonly  
ApplicationDbContext -
context. 5
;5 6
public !
TransactionRepository $
($ % 
ApplicationDbContext% 9
context: A
)A B
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
async 
Task 
< 
Result  
<  !
IEnumerable! ,
<, -
Transaction- 8
>8 9
>9 :
>: ;#
GetAllTransactionsAsync< S
(S T
)T U
{ 	
try 
{ 
var 
transactions  
=! "
await# (
context) 0
.0 1
Transactions1 =
.= >
ToListAsync> I
(I J
)J K
;K L
return 
Result 
< 
IEnumerable )
<) *
Transaction* 5
>5 6
>6 7
.7 8
Success8 ?
(? @
transactions@ L
)L M
;M N
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 
Result 
< 
IEnumerable )
<) *
Transaction* 5
>5 6
>6 7
.7 8
Failure8 ?
(? @
$"@ B
$strB s
{s t
ext v
.v w
Messagew ~
}~ 
"	 Ä
)
Ä Å
;
Å Ç
} 
} 	
public 
async 
Task 
< 
Result  
<  !
Transaction! ,
>, -
>- .#
GetTransactionByIdAsync/ F
(F G
GuidG K
idL N
)N O
{ 	
try   
{!! 
var"" 
transaction"" 
=""  !
await""" '
context""( /
.""/ 0
Transactions""0 <
.""< =
	FindAsync""= F
(""F G
id""G I
)""I J
;""J K
return## 
Result## 
<## 
Transaction## )
>##) *
.##* +
Success##+ 2
(##2 3
transaction##3 >
)##> ?
;##? @
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
return'' 
Result'' 
<'' 
Transaction'' )
>'') *
.''* +
Failure''+ 2
(''2 3
$"''3 5
$str''5 e
{''e f
ex''f h
.''h i
Message''i p
}''p q
"''q r
)''r s
;''s t
}(( 
})) 	
public,, 
async,, 
Task,, 
<,, 
Result,,  
<,,  !
Guid,,! %
>,,% &
>,,& '
AddTransactionAsync,,( ;
(,,; <
Transaction,,< G
transaction,,H S
),,S T
{-- 	
try.. 
{// 
await00 
context00 
.00 
Transactions00 *
.00* +
AddAsync00+ 3
(003 4
transaction004 ?
)00? @
;00@ A
await11 
context11 
.11 
SaveChangesAsync11 .
(11. /
)11/ 0
;110 1
return22 
Result22 
<22 
Guid22 "
>22" #
.22# $
Success22$ +
(22+ ,
transaction22, 7
.227 8
TransactionId228 E
)22E F
;22F G
}33 
catch44 
(44 
	Exception44 
ex44 
)44  
{55 
return66 
Result66 
<66 
Guid66 "
>66" #
.66# $
Failure66$ +
(66+ ,
$"66, .
$str66. \
{66\ ]
ex66] _
.66_ `
Message66` g
}66g h
"66h i
)66i j
;66j k
}77 
}88 	
public:: 
async:: 
Task:: 
<:: 
Result::  
<::  !
Guid::! %
>::% &
>::& '"
UpdateTransactionAsync::( >
(::> ?
Transaction::? J
transaction::K V
)::V W
{;; 	
try<< 
{== 
var>> 
existingTransaction>> '
=>>( )
await>>* /
context>>0 7
.>>7 8
Transactions>>8 D
.>>D E
	FindAsync>>E N
(>>N O
transaction>>O Z
.>>Z [
TransactionId>>[ h
)>>h i
;>>i j
if?? 
(?? 
existingTransaction?? '
!=??( *
null??+ /
)??/ 0
{@@ 
contextAA 
.AA 
EntryAA !
(AA! "
existingTransactionAA" 5
)AA5 6
.AA6 7
CurrentValuesAA7 D
.AAD E
	SetValuesAAE N
(AAN O
transactionAAO Z
)AAZ [
;AA[ \
awaitBB 
contextBB !
.BB! "
SaveChangesAsyncBB" 2
(BB2 3
)BB3 4
;BB4 5
returnCC 
ResultCC !
<CC! "
GuidCC" &
>CC& '
.CC' (
SuccessCC( /
(CC/ 0
transactionCC0 ;
.CC; <
TransactionIdCC< I
)CCI J
;CCJ K
}DD 
elseEE 
{FF 
returnGG 
ResultGG !
<GG! "
GuidGG" &
>GG& '
.GG' (
FailureGG( /
(GG/ 0
$strGG0 H
)GGH I
;GGI J
}HH 
}II 
catchJJ 
(JJ 
	ExceptionJJ 
exJJ 
)JJ  
{KK 
returnLL 
ResultLL 
<LL 
GuidLL "
>LL" #
.LL# $
FailureLL$ +
(LL+ ,
$"LL, .
$strLL. \
{LL\ ]
exLL] _
.LL_ `
MessageLL` g
}LLg h
"LLh i
)LLi j
;LLj k
}MM 
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP 
ResultPP  
<PP  !
GuidPP! %
>PP% &
>PP& '"
DeleteTransactionAsyncPP( >
(PP> ?
GuidPP? C
idPPD F
)PPF G
{QQ 	
tryRR 
{SS 
varTT 
transactionTT 
=TT  !
awaitTT" '
contextTT( /
.TT/ 0
TransactionsTT0 <
.TT< =
	FindAsyncTT= F
(TTF G
idTTG I
)TTI J
;TTJ K
ifUU 
(UU 
transactionUU 
!=UU  "
nullUU# '
)UU' (
{VV 
contextWW 
.WW 
TransactionsWW (
.WW( )
RemoveWW) /
(WW/ 0
transactionWW0 ;
)WW; <
;WW< =
awaitXX 
contextXX !
.XX! "
SaveChangesAsyncXX" 2
(XX2 3
)XX3 4
;XX4 5
returnYY 
ResultYY !
<YY! "
GuidYY" &
>YY& '
.YY' (
SuccessYY( /
(YY/ 0
idYY0 2
)YY2 3
;YY3 4
}ZZ 
else[[ 
{\\ 
return]] 
Result]] !
<]]! "
Guid]]" &
>]]& '
.]]' (
Failure]]( /
(]]/ 0
$str]]0 H
)]]H I
;]]I J
}^^ 
}__ 
catch`` 
(`` 
	Exception`` 
ex`` 
)``  
{aa 
returnbb 
Resultbb 
<bb 
Guidbb "
>bb" #
.bb# $
Failurebb$ +
(bb+ ,
$"bb, .
$strbb. \
{bb\ ]
exbb] _
.bb_ `
Messagebb` g
}bbg h
"bbh i
)bbi j
;bbj k
}cc 
}dd 	
publicff 
asyncff 
Taskff 
<ff 
Resultff  
<ff  !
Transactionff! ,
>ff, -
>ff- .+
GetTransactionByPropertyIdAsyncff/ N
(ffN O
GuidffO S
idffT V
)ffV W
{gg 	
tryhh 
{ii 
varjj 
transactionjj 
=jj  !
awaitjj" '
contextjj( /
.jj/ 0
Transactionsjj0 <
.jj< =
FirstOrDefaultAsyncjj= P
(jjP Q
tjjQ R
=>jjS U
tjjV W
.jjW X

PropertyIdjjX b
==jjc e
idjjf h
)jjh i
;jji j
ifkk 
(kk 
transactionkk 
!=kk  "
nullkk# '
)kk' (
{ll 
returnmm 
Resultmm !
<mm! "
Transactionmm" -
>mm- .
.mm. /
Successmm/ 6
(mm6 7
transactionmm7 B
)mmB C
;mmC D
}nn 
returnoo 
Resultoo 
<oo 
Transactionoo )
>oo) *
.oo* +
Failureoo+ 2
(oo2 3
$stroo3 K
)ooK L
;ooL M
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 
Resultss 
<ss 
Transactionss )
>ss) *
.ss* +
Failuress+ 2
(ss2 3
$"ss3 5
$strss5 i
{ssi j
exssj l
.ssl m
Messagessm t
}sst u
"ssu v
)ssv w
;ssw x
}tt 
}uu 	
publicww 
asyncww 
Taskww 
<ww 
Resultww  
<ww  !
IEnumerableww! ,
<ww, -
Transactionww- 8
>ww8 9
>ww9 :
>ww: ;$
GetTransactionsByBuyerIdww< T
(wwT U
GuidwwU Y
userIdwwZ `
)ww` a
{xx 	
tryyy 
{zz 
var{{ 
transactions{{  
={{! "
await{{# (
context{{) 0
.{{0 1
Transactions{{1 =
.{{= >
Where{{> C
({{C D
t{{D E
=>{{F H
t{{I J
.{{J K
BuyerId{{K R
=={{S U
userId{{V \
){{\ ]
.{{] ^
ToListAsync{{^ i
({{i j
){{j k
;{{k l
return|| 
Result|| 
<|| 
IEnumerable|| )
<||) *
Transaction||* 5
>||5 6
>||6 7
.||7 8
Success||8 ?
(||? @
transactions||@ L
)||L M
;||M N
}}} 
catch~~ 
(~~ 
	Exception~~ 
ex~~ 
)~~  
{ 
return
ÄÄ 
Result
ÄÄ 
<
ÄÄ 
IEnumerable
ÄÄ )
<
ÄÄ) *
Transaction
ÄÄ* 5
>
ÄÄ5 6
>
ÄÄ6 7
.
ÄÄ7 8
Failure
ÄÄ8 ?
(
ÄÄ? @
$"
ÄÄ@ B
$str
ÄÄB s
{
ÄÄs t
ex
ÄÄt v
.
ÄÄv w
Message
ÄÄw ~
}
ÄÄ~ 
"ÄÄ Ä
)ÄÄÄ Å
;ÄÄÅ Ç
}
ÅÅ 
}
ÇÇ 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
Result
ÑÑ  
<
ÑÑ  !
IEnumerable
ÑÑ! ,
<
ÑÑ, -
Transaction
ÑÑ- 8
>
ÑÑ8 9
>
ÑÑ9 :
>
ÑÑ: ;'
GetTransactionsBySellerId
ÑÑ< U
(
ÑÑU V
Guid
ÑÑV Z
userId
ÑÑ[ a
)
ÑÑa b
{
ÖÖ 	
try
ÜÜ 
{
áá 
var
àà 
transactions
àà  
=
àà! "
await
àà# (
context
àà) 0
.
àà0 1
Transactions
àà1 =
.
àà= >
Where
àà> C
(
ààC D
t
ààD E
=>
ààF H
t
ààI J
.
ààJ K
SellerId
ààK S
==
ààT V
userId
ààW ]
)
àà] ^
.
àà^ _
ToListAsync
àà_ j
(
ààj k
)
ààk l
;
ààl m
return
ââ 
Result
ââ 
<
ââ 
IEnumerable
ââ )
<
ââ) *
Transaction
ââ* 5
>
ââ5 6
>
ââ6 7
.
ââ7 8
Success
ââ8 ?
(
ââ? @
transactions
ââ@ L
)
ââL M
;
ââM N
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
ex
ãã 
)
ãã  
{
åå 
return
çç 
Result
çç 
<
çç 
IEnumerable
çç )
<
çç) *
Transaction
çç* 5
>
çç5 6
>
çç6 7
.
çç7 8
Failure
çç8 ?
(
çç? @
$"
çç@ B
$str
ççB s
{
ççs t
ex
ççt v
.
ççv w
Message
ççw ~
}
çç~ 
"çç Ä
)ççÄ Å
;ççÅ Ç
}
éé 
}
èè 	
}
êê 
}ëë âQ
dC:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Repositories\PropertyListingRepository.cs
	namespace 	
Infrastructure
 
. 
Repositories %
{ 
public		 

class		 %
PropertyListingRepository		 *
:		+ ,&
IPropertyListingRepository		- G
{

 
private 
readonly  
ApplicationDbContext -
context. 5
;5 6
public %
PropertyListingRepository (
(( ) 
ApplicationDbContext) =
context> E
)E F
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
async 
Task 
< 
Result  
<  !
IEnumerable! ,
<, -
PropertyListing- <
>< =
>= >
>> ?
GetAllListingsAsync@ S
(S T
)T U
{ 	
try 
{ 
var 
listings 
= 
await $
context% ,
., -
PropertyListings- =
.= >
ToListAsync> I
(I J
)J K
;K L
return 
Result 
< 
IEnumerable )
<) *
PropertyListing* 9
>9 :
>: ;
.; <
Success< C
(C D
listingsD L
)L M
;M N
} 
catch 
( 
	Exception 
ex 
) 
{ 
return 
Result 
< 
IEnumerable )
<) *
PropertyListing* 9
>9 :
>: ;
.; <
Failure< C
(C D
$"D F
$strF |
{| }
ex} 
.	 Ä
Message
Ä á
}
á à
"
à â
)
â ä
;
ä ã
} 
} 	
public 
async 
Task 
< 
Result  
<  !
PropertyListing! 0
>0 1
>1 2
GetListingByIdAsync3 F
(F G
GuidG K
idL N
)N O
{   	
try!! 
{"" 
var## 
listing## 
=## 
await## #
context##$ +
.##+ ,
PropertyListings##, <
.##< =
	FindAsync##= F
(##F G
id##G I
)##I J
;##J K
if$$ 
($$ 
listing$$ 
==$$ 
null$$ #
)$$# $
{%% 
return&& 
Result&& !
<&&! "
PropertyListing&&" 1
>&&1 2
.&&2 3
Failure&&3 :
(&&: ;
$str&&; X
)&&X Y
;&&Y Z
}'' 
return(( 
Result(( 
<(( 
PropertyListing(( -
>((- .
.((. /
Success((/ 6
(((6 7
listing((7 >
)((> ?
;((? @
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 
Result,, 
<,, 
PropertyListing,, -
>,,- .
.,,. /
Failure,,/ 6
(,,6 7
$",,7 9
$str,,9 n
{,,n o
ex,,o q
.,,q r
Message,,r y
},,y z
",,z {
),,{ |
;,,| }
}-- 
}// 	
public11 
async11 
Task11 
<11 
Result11  
<11  !
IEnumerable11! ,
<11, -
PropertyListing11- <
>11< =
>11= >
>11> ?
GetListingsByUserId11@ S
(11S T
Guid11T X
userId11Y _
)11_ `
{22 	
try33 
{44 
var55 
listings55 
=55 
await55 $
context55% ,
.55, -
PropertyListings55- =
.66  !
Where66! &
(66& '
listing66' .
=>66/ 1
listing662 9
.669 :
UserID66: @
==66A C
userId66D J
)66J K
.77  !
ToListAsync77! ,
(77, -
)77- .
;77. /
return88 
Result88 
<88 
IEnumerable88 )
<88) *
PropertyListing88* 9
>889 :
>88: ;
.88; <
Success88< C
(88C D
listings88D L
)88L M
;88M N
}99 
catch:: 
(:: 
	Exception:: 
ex:: 
)::  
{;; 
return<< 
Result<< 
<<< 
IEnumerable<< )
<<<) *
PropertyListing<<* 9
><<9 :
><<: ;
.<<; <
Failure<<< C
(<<C D
$"<<D F
$str	<<F Ü
{
<<Ü á
ex
<<á â
.
<<â ä
Message
<<ä ë
}
<<ë í
"
<<í ì
)
<<ì î
;
<<î ï
}== 
}>> 	
public@@ 
async@@ 
Task@@ 
<@@ 
Result@@  
<@@  !
Guid@@! %
>@@% &
>@@& '
AddListingAsync@@( 7
(@@7 8
PropertyListing@@8 G
listing@@H O
)@@O P
{AA 	
tryBB 
{CC 
awaitDD 
contextDD 
.DD 
PropertyListingsDD .
.DD. /
AddAsyncDD/ 7
(DD7 8
listingDD8 ?
)DD? @
;DD@ A
awaitEE 
contextEE 
.EE 
SaveChangesAsyncEE .
(EE. /
)EE/ 0
;EE0 1
returnFF 
ResultFF 
<FF 
GuidFF "
>FF" #
.FF# $
SuccessFF$ +
(FF+ ,
listingFF, 3
.FF3 4

PropertyIdFF4 >
)FF> ?
;FF? @
}GG 
catchHH 
(HH 
	ExceptionHH 
exHH 
)HH  
{II 
returnJJ 
ResultJJ 
<JJ 
GuidJJ "
>JJ" #
.JJ# $
FailureJJ$ +
(JJ+ ,
$"JJ, .
$strJJ. a
{JJa b
exJJb d
.JJd e
MessageJJe l
}JJl m
"JJm n
)JJn o
;JJo p
}KK 
}LL 	
publicNN 
asyncNN 
TaskNN 
<NN 
ResultNN  
<NN  !
GuidNN! %
>NN% &
>NN& '
UpdateListingAsyncNN( :
(NN: ;
PropertyListingNN; J
listingNNK R
)NNR S
{OO 	
tryPP 
{QQ 
varRR 
existingListingRR #
=RR$ %
awaitRR& +
contextRR, 3
.RR3 4
PropertyListingsRR4 D
.RRD E
	FindAsyncRRE N
(RRN O
listingRRO V
.RRV W

PropertyIdRRW a
)RRa b
;RRb c
ifSS 
(SS 
existingListingSS #
!=SS$ &
nullSS' +
)SS+ ,
{TT 
contextUU 
.UU 
EntryUU !
(UU! "
existingListingUU" 1
)UU1 2
.UU2 3
CurrentValuesUU3 @
.UU@ A
	SetValuesUUA J
(UUJ K
listingUUK R
)UUR S
;UUS T
awaitVV 
contextVV !
.VV! "
SaveChangesAsyncVV" 2
(VV2 3
)VV3 4
;VV4 5
returnXX 
ResultXX !
<XX! "
GuidXX" &
>XX& '
.XX' (
SuccessXX( /
(XX/ 0
listingXX0 7
.XX7 8

PropertyIdXX8 B
)XXB C
;XXC D
}YY 
elseZZ 
{[[ 
return\\ 
Result\\ !
<\\! "
Guid\\" &
>\\& '
.\\' (
Failure\\( /
(\\/ 0
$str\\0 D
)\\D E
;\\E F
}]] 
}^^ 
catch__ 
(__ 
	Exception__ 
ex__ 
)__  
{`` 
returnaa 
Resultaa 
<aa 
Guidaa "
>aa" #
.aa# $
Failureaa$ +
(aa+ ,
$"aa, .
$straa. a
{aaa b
exaab d
.aad e
Messageaae l
}aal m
"aam n
)aan o
;aao p
}bb 
}dd 	
publicff 
asyncff 
Taskff 
<ff 
Resultff  
<ff  !
Guidff! %
>ff% &
>ff& '
DeleteListingAsyncff( :
(ff: ;
Guidff; ?
idff@ B
)ffB C
{gg 	
tryhh 
{ii 
varjj 
propertyListingjj #
=jj$ %
awaitjj& +
contextjj, 3
.jj3 4
PropertyListingsjj4 D
.jjD E
	FindAsyncjjE N
(jjN O
idjjO Q
)jjQ R
;jjR S
ifkk 
(kk 
propertyListingkk #
!=kk$ &
nullkk' +
)kk+ ,
{ll 
contextmm 
.mm 
PropertyListingsmm ,
.mm, -
Removemm- 3
(mm3 4
propertyListingmm4 C
)mmC D
;mmD E
awaitnn 
contextnn !
.nn! "
SaveChangesAsyncnn" 2
(nn2 3
)nn3 4
;nn4 5
returnoo 
Resultoo !
<oo! "
Guidoo" &
>oo& '
.oo' (
Successoo( /
(oo/ 0
idoo0 2
)oo2 3
;oo3 4
}pp 
returnqq 
Resultqq 
<qq 
Guidqq "
>qq" #
.qq# $
Failureqq$ +
(qq+ ,
$strqq, H
)qqH I
;qqI J
}rr 
catchss 
(ss 
	Exceptionss 
exss 
)ss  
{tt 
returnuu 
Resultuu 
<uu 
Guiduu "
>uu" #
.uu# $
Failureuu$ +
(uu+ ,
$"uu, .
$struu. a
{uua b
exuub d
.uud e
Messageuue l
}uul m
"uum n
)uun o
;uuo p
}vv 
}ww 	
}xx 
}yy íf
bC:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Repositories\ClientInquiryRepository.cs
	namespace 	
Infrastructure
 
. 
Repositories %
{ 
public		 

class		 #
ClientInquiryRepository		 (
:		) *$
IClientInquiryRepository		+ C
{

 
private 
readonly  
ApplicationDbContext -
context. 5
;5 6
public #
ClientInquiryRepository &
(& ' 
ApplicationDbContext' ;
context< C
)C D
{ 	
this 
. 
context 
= 
context "
;" #
} 	
public 
async 
Task 
< 
Result  
<  !
IEnumerable! ,
<, -
ClientInquiry- :
>: ;
>; <
>< = 
GetAllInquiriesAsync> R
(R S
)S T
{ 	
try 
{ 
var 
	inquiries 
= 
await  %
context& -
.- .
ClientInquiries. =
.= >
ToListAsync> I
(I J
)J K
;K L
return 
Result 
< 
IEnumerable )
<) *
ClientInquiry* 7
>7 8
>8 9
.9 :
Success: A
(A B
	inquiriesB K
)K L
;L M
} 
catch 
( 
	Exception 
ex 
)  
{ 
return 
Result 
< 
IEnumerable )
<) *
ClientInquiry* 7
>7 8
>8 9
.9 :
Failure: A
(A B
$"B D
$strD r
{r s
exs u
.u v
Messagev }
}} ~
"~ 
)	 Ä
;
Ä Å
} 
} 	
public 
async 
Task 
< 
Result  
<  !
ClientInquiry! .
>. /
>/ 0
GetInquiryByIdAsync1 D
(D E
GuidE I
idJ L
)L M
{ 	
try 
{ 
var   
inquiry   
=   
await   #
context  $ +
.  + ,
ClientInquiries  , ;
.  ; <
	FindAsync  < E
(  E F
id  F H
)  H I
;  I J
if!! 
(!! 
inquiry!! 
==!! 
null!! #
)!!# $
{"" 
return## 
Result## !
<##! "
ClientInquiry##" /
>##/ 0
.##0 1
Failure##1 8
(##8 9
$str##9 M
)##M N
;##N O
}$$ 
return&& 
Result&& 
<&& 
ClientInquiry&& +
>&&+ ,
.&&, -
Success&&- 4
(&&4 5
inquiry&&5 <
)&&< =
;&&= >
}'' 
catch(( 
((( 
	Exception(( 
ex(( 
)((  
{)) 
return** 
Result** 
<** 
ClientInquiry** +
>**+ ,
.**, -
Failure**- 4
(**4 5
$"**5 7
$str**7 c
{**c d
ex**d f
.**f g
Message**g n
}**n o
"**o p
)**p q
;**q r
}++ 
},, 	
public-- 
async-- 
Task-- 
<-- 
Result--  
<--  !
IEnumerable--! ,
<--, -
ClientInquiry--- :
>--: ;
>--; <
>--< ="
GetInquiriesByClientId--> T
(--T U
Guid--U Y
clientId--Z b
)--b c
{.. 	
try// 
{00 
var11 
	inquiries11 
=11 
await11  %
context11& -
.11- .
ClientInquiries11. =
.224 5
Where225 :
(22: ;
inquiry22; B
=>22C E
inquiry22F M
.22M N
ClientId22N V
==22W Y
clientId22Z b
)22b c
.334 5
ToListAsync335 @
(33@ A
)33A B
;33B C
return44 
Result44 
<44 
IEnumerable44 )
<44) *
ClientInquiry44* 7
>447 8
>448 9
.449 :
Success44: A
(44A B
	inquiries44B K
)44K L
;44L M
}55 
catch66 
(66 
	Exception66 
ex66 
)66  
{77 
return88 
Result88 
<88 
IEnumerable88 )
<88) *
ClientInquiry88* 7
>887 8
>888 9
.889 :
Failure88: A
(88A B
$"88B D
$str88D r
{88r s
ex88s u
.88u v
Message88v }
}88} ~
"88~ 
)	88 Ä
;
88Ä Å
}99 
}:: 	
public;; 
async;; 
Task;; 
<;; 
Result;;  
<;;  !
Guid;;! %
>;;% &
>;;& '
AddInquiryAsync;;( 7
(;;7 8
ClientInquiry;;8 E
inquiry;;F M
);;M N
{<< 	
try== 
{>> 
await?? 
context?? 
.?? 
ClientInquiries?? -
.??- .
AddAsync??. 6
(??6 7
inquiry??7 >
)??> ?
;??? @
await@@ 
context@@ 
.@@ 
SaveChangesAsync@@ .
(@@. /
)@@/ 0
;@@0 1
returnAA 
ResultAA 
<AA 
GuidAA "
>AA" #
.AA# $
SuccessAA$ +
(AA+ ,
inquiryAA, 3
.AA3 4
	InquiryIdAA4 =
)AA= >
;AA> ?
}BB 
catchCC 
(CC 
	ExceptionCC 
exCC 
)CC  
{DD 
returnEE 
ResultEE 
<EE 
GuidEE "
>EE" #
.EE# $
FailureEE$ +
(EE+ ,
$"EE, .
$strEE. V
{EEV W
exEEW Y
.EEY Z
MessageEEZ a
}EEa b
"EEb c
)EEc d
;EEd e
}FF 
}GG 	
publicHH 
asyncHH 
TaskHH 
<HH 
ResultHH  
<HH  !
GuidHH! %
>HH% &
>HH& '
UpdateInquiryAsyncHH( :
(HH: ;
ClientInquiryHH; H
inquiryHHI P
)HHP Q
{II 	
tryJJ 
{KK 
varLL 
existingInquiryLL #
=LL$ %
awaitLL& +
contextLL, 3
.LL3 4
ClientInquiriesLL4 C
.LLC D
	FindAsyncLLD M
(LLM N
inquiryLLN U
.LLU V
	InquiryIdLLV _
)LL_ `
;LL` a
ifMM 
(MM 
existingInquiryMM #
!=MM$ &
nullMM' +
)MM+ ,
{NN 
contextOO 
.OO 
EntryOO !
(OO! "
existingInquiryOO" 1
)OO1 2
.OO2 3
CurrentValuesOO3 @
.OO@ A
	SetValuesOOA J
(OOJ K
inquiryOOK R
)OOR S
;OOS T
awaitPP 
contextPP !
.PP! "
SaveChangesAsyncPP" 2
(PP2 3
)PP3 4
;PP4 5
returnRR 
ResultRR !
<RR! "
GuidRR" &
>RR& '
.RR' (
SuccessRR( /
(RR/ 0
inquiryRR0 7
.RR7 8
	InquiryIdRR8 A
)RRA B
;RRB C
}SS 
elseTT 
{UU 
returnVV 
ResultVV !
<VV! "
GuidVV" &
>VV& '
.VV' (
FailureVV( /
(VV/ 0
$strVV0 D
)VVD E
;VVE F
}WW 
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
return[[ 
Result[[ 
<[[ 
Guid[[ "
>[[" #
.[[# $
Failure[[$ +
([[+ ,
$"[[, .
$str[[. X
{[[X Y
ex[[Y [
.[[[ \
Message[[\ c
}[[c d
"[[d e
)[[e f
;[[f g
}\\ 
}]] 	
public^^ 
async^^ 
Task^^ 
<^^ 
Result^^  
<^^  !
Guid^^! %
>^^% &
>^^& '
DeleteInquiryAsync^^( :
(^^: ;
Guid^^; ?
id^^@ B
)^^B C
{__ 	
try`` 
{aa 
varbb 
inquirybb 
=bb 
awaitbb #
contextbb$ +
.bb+ ,
ClientInquiriesbb, ;
.bb; <
	FindAsyncbb< E
(bbE F
idbbF H
)bbH I
;bbI J
ifcc 
(cc 
inquirycc 
!=cc 
nullcc #
)cc# $
{dd 
contextee 
.ee 
ClientInquiriesee +
.ee+ ,
Removeee, 2
(ee2 3
inquiryee3 :
)ee: ;
;ee; <
awaitff 
contextff !
.ff! "
SaveChangesAsyncff" 2
(ff2 3
)ff3 4
;ff4 5
returngg 
Resultgg !
<gg! "
Guidgg" &
>gg& '
.gg' (
Successgg( /
(gg/ 0
idgg0 2
)gg2 3
;gg3 4
}hh 
returnii 
Resultii 
<ii 
Guidii "
>ii" #
.ii# $
Failureii$ +
(ii+ ,
$strii, ?
)ii? @
;ii@ A
}jj 
catchkk 
(kk 
	Exceptionkk 
exkk 
)kk  
{ll 
returnmm 
Resultmm 
<mm 
Guidmm "
>mm" #
.mm# $
Failuremm$ +
(mm+ ,
$"mm, .
$strmm. X
{mmX Y
exmmY [
.mm[ \
Messagemm\ c
}mmc d
"mmd e
)mme f
;mmf g
}nn 
}oo 	
publicqq 
asyncqq 
Taskqq 
<qq 
Resultqq  
<qq  !
IEnumerableqq! ,
<qq, -
PropertyListingqq- <
>qq< =
>qq= >
>qq> ?$
SearchAllPropertiesAsyncqq@ X
(qqX Y
stringqqY _
searchQueryqq` k
)qqk l
{rr 	
tryss 
{tt 
ifuu 
(uu 
stringuu 
.uu 
IsNullOrWhiteSpaceuu -
(uu- .
searchQueryuu. 9
)uu9 :
)uu: ;
{vv 
returnww 
Resultww !
<ww! "
IEnumerableww" -
<ww- .
PropertyListingww. =
>ww= >
>ww> ?
.ww? @
Failureww@ G
(wwG H
$strwwH o
)wwo p
;wwp q
}xx 
varzz 

propertieszz 
=zz  
awaitzz! &
contextzz' .
.zz. /
PropertyListingszz/ ?
.{{( )
Where{{) .
({{. /
property{{/ 7
=>{{8 :
({{; <
property{{< D
.{{D E
Title{{E J
!={{K M
null{{M Q
&&{{R T
property{{U ]
.{{] ^
Title{{^ c
.{{c d
ToUpper{{d k
({{k l
){{l m
.{{m n
Contains{{n v
({{v w
searchQuery	{{w Ç
.
{{Ç É
ToUpper
{{É ä
(
{{ä ã
)
{{ã å
)
{{å ç
)
{{ç é
||
{{è ë
(
{{í ì
property
{{ì õ
.
{{õ ú
Description
{{ú ß
!=
{{® ™
null
{{™ Æ
&&
{{Ø ±
property
{{≤ ∫
.
{{∫ ª
Description
{{ª ∆
.
{{∆ «
Contains
{{« œ
(
{{œ –
searchQuery
{{– €
)
{{€ ‹
)
{{‹ ›
)
{{› ﬁ
.||( )
ToListAsync||) 4
(||4 5
)||5 6
;||6 7
return}} 
Result}} 
<}} 
IEnumerable}} )
<}}) *
PropertyListing}}* 9
>}}9 :
>}}: ;
.}}; <
Success}}< C
(}}C D

properties}}D N
)}}N O
;}}O P
}~~ 
catch 
( 
	Exception 
ex 
)  
{
ÄÄ 
return
ÅÅ 
Result
ÅÅ 
<
ÅÅ 
IEnumerable
ÅÅ )
<
ÅÅ) *
PropertyListing
ÅÅ* 9
>
ÅÅ9 :
>
ÅÅ: ;
.
ÅÅ; <
Failure
ÅÅ< C
(
ÅÅC D
$"
ÅÅD F
$str
ÅÅF u
{
ÅÅu v
ex
ÅÅv x
.
ÅÅx y
MessageÅÅy Ä
}ÅÅÄ Å
"ÅÅÅ Ç
)ÅÅÇ É
;ÅÅÉ Ñ
}
ÇÇ 
}
ÉÉ 	
}
ÑÑ 
}ÖÖ ∏h
^C:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Persistance\ApplicationDbContext.cs
	namespace 	
Infrastructure
 
. 
Persistance $
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:T U
baseV Z
(Z [
options[ b
)b c
{		 	
}

 	
public 
DbSet 
< 
PropertyListing $
>$ %
PropertyListings& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 
DbSet 
< 
ClientInquiry "
>" #
ClientInquiries$ 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
DbSet 
< 
Transaction  
>  !
Transactions" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
.  
HasPostgresExtension -
(- .
$str. 9
)9 :
;: ;
modelBuilder 
. 
Entity 
<  
PropertyListing  /
>/ 0
(0 1
entity 
=> 
{ 
entity 
. 
ToTable &
(& '
$str' 9
)9 :
;: ;
entity 
. 
HasKey %
(% &
e& '
=>( *
e+ ,
., -

PropertyId- 7
)7 8
;8 9
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /

PropertyId/ 9
)9 :
.: ;
HasColumnType; H
(H I
$strI O
)O P
.P Q
HasDefaultValueSqlQ c
(c d
$strd x
)x y
.y z 
ValueGeneratedOnAdd	z ç
(
ç é
)
é è
;
è ê
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
Address/ 6
)6 7
.7 8

IsRequired8 B
(B C
)C D
.D E
HasMaxLengthE Q
(Q R
$numR U
)U V
;V W
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
Title/ 4
)4 5
.5 6

IsRequired6 @
(@ A
)A B
.B C
HasMaxLengthC O
(O P
$numP S
)S T
;T U
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
Type/ 3
)3 4
.4 5

IsRequired5 ?
(? @
)@ A
;A B
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
Price/ 4
)4 5
.5 6

IsRequired6 @
(@ A
)A B
;B C
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
SquareFootage/ <
)< =
.= >

IsRequired> H
(H I
)I J
;J K
entity 
. 
Property '
(' (
e( )
=>* ,
e- .
.. /
NumberOfBedrooms/ ?
)? @
.@ A

IsRequiredA K
(K L
)L M
;M N
entity   
.   
Property   '
(  ' (
e  ( )
=>  * ,
e  - .
.  . /
NumberOfBathrooms  / @
)  @ A
.  A B

IsRequired  B L
(  L M
)  M N
;  N O
entity!! 
.!! 
Property!! '
(!!' (
e!!( )
=>!!* ,
e!!- .
.!!. /
Description!!/ :
)!!: ;
.!!; <

IsRequired!!< F
(!!F G
)!!G H
.!!H I
HasMaxLength!!I U
(!!U V
$num!!V Y
)!!Y Z
;!!Z [
entity"" 
."" 
Property"" '
(""' (
e""( )
=>""* ,
e""- .
."". /
Status""/ 5
)""5 6
.""6 7

IsRequired""7 A
(""A B
)""B C
;""C D
entity## 
.## 
Property## '
(##' (
e##( )
=>##* ,
e##- .
.##. /
ListingDate##/ :
)##: ;
.##; <

IsRequired##< F
(##F G
)##G H
;##H I
entity$$ 
.$$ 
Property$$ '
($$' (
e$$( )
=>$$* ,
e$$- .
.$$. /
	ImageURLs$$/ 8
)$$8 9
.$$9 :

IsRequired$$: D
($$D E
)$$E F
;$$F G
entity%% 
.%% 
Property%% '
(%%' (
e%%( )
=>%%* ,
e%%- .
.%%. /
UserID%%/ 5
)%%5 6
.%%6 7

IsRequired%%7 A
(%%A B
)%%B C
;%%C D
}'' 
)(( 
;(( 
modelBuilder** 
.** 
Entity** 
<**  
ClientInquiry**  -
>**- .
(**. /
entity++ 
=>++ 
{,, 
entity-- 
.-- 
ToTable-- "
(--" #
$str--# 4
)--4 5
;--5 6
entity.. 
... 
HasKey.. !
(..! "
e.." #
=>..$ &
e..' (
...( )
	InquiryId..) 2
)..2 3
;..3 4
entity// 
.// 
Property// #
(//# $
e//$ %
=>//& (
e//) *
.//* +
	InquiryId//+ 4
)//4 5
.//5 6
HasColumnType//6 C
(//C D
$str//D J
)//J K
.//K L
HasDefaultValueSql//L ^
(//^ _
$str//_ s
)//s t
.//t u 
ValueGeneratedOnAdd	//u à
(
//à â
)
//â ä
;
//ä ã
entity00 
.00 
Property00 #
(00# $
e00$ %
=>00& (
e00) *
.00* +
ClientId00+ 3
)003 4
.004 5

IsRequired005 ?
(00? @
)00@ A
;00A B
}22 
)22 
;22 
modelBuilder44 
.44 
Entity44 
<44  
Transaction44  +
>44+ ,
(44, -
entity55 
=>55 
{66 
entity77 
.77 
ToTable77 "
(77" #
$str77# 1
)771 2
;772 3
entity88 
.88 
HasKey88 !
(88! "
e88" #
=>88$ &
e88' (
.88( )
TransactionId88) 6
)886 7
;887 8
entity99 
.99 
Property99 #
(99# $
e99$ %
=>99& (
e99) *
.99* +
TransactionId99+ 8
)998 9
.999 :
HasColumnType99: G
(99G H
$str99H N
)99N O
.99O P
HasDefaultValueSql99P b
(99b c
$str99c w
)99w x
.99x y 
ValueGeneratedOnAdd	99y å
(
99å ç
)
99ç é
;
99é è
entity:: 
.:: 
Property:: #
(::# $
e::$ %
=>::& (
e::) *
.::* +

PropertyId::+ 5
)::5 6
.::6 7

IsRequired::7 A
(::A B
)::B C
;::C D
entity;; 
.;; 
Property;; #
(;;# $
e;;$ %
=>;;& (
e;;) *
.;;* +
BuyerId;;+ 2
);;2 3
.;;3 4

IsRequired;;4 >
(;;> ?
);;? @
;;;@ A
entity<< 
.<< 
Property<< #
(<<# $
e<<$ %
=><<& (
e<<) *
.<<* +
SellerId<<+ 3
)<<3 4
.<<4 5

IsRequired<<5 ?
(<<? @
)<<@ A
;<<A B
entity== 
.== 
Property== #
(==# $
e==$ %
=>==& (
e==) *
.==* +
	SalePrice==+ 4
)==4 5
.==5 6

IsRequired==6 @
(==@ A
)==A B
;==B C
entity?? 
.?? 
HasOne?? !
<??! "
PropertyListing??" 1
>??1 2
(??2 3
)??3 4
.@@ 
WithMany@@ !
(@@! "
)@@" #
.AA 
HasForeignKeyAA &
(AA& '
eAA' (
=>AA) +
eAA, -
.AA- .

PropertyIdAA. 8
)AA8 9
.BB 
OnDeleteBB !
(BB! "
DeleteBehaviorBB" 0
.BB0 1
CascadeBB1 8
)BB8 9
;BB9 :
entityDD 
.DD 
HasOneDD !
<DD! "
UserDD" &
>DD& '
(DD' (
)DD( )
.EE 
WithManyEE !
(EE! "
)EE" #
.FF 
HasForeignKeyFF &
(FF& '
eFF' (
=>FF) +
eFF, -
.FF- .
BuyerIdFF. 5
)FF5 6
.GG 
OnDeleteGG !
(GG! "
DeleteBehaviorGG" 0
.GG0 1
CascadeGG1 8
)GG8 9
;GG9 :
entityII 
.II 
HasOneII !
<II! "
UserII" &
>II& '
(II' (
)II( )
.JJ 
WithManyJJ !
(JJ! "
)JJ" #
.KK 
HasForeignKeyKK &
(KK& '
eKK' (
=>KK) +
eKK, -
.KK- .
SellerIdKK. 6
)KK6 7
.LL 
OnDeleteLL !
(LL! "
DeleteBehaviorLL" 0
.LL0 1
CascadeLL1 8
)LL8 9
;LL9 :
}NN 
)NN 
;NN 
modelBuilderPP 
.PP 
EntityPP 
<PP  
UserPP  $
>PP$ %
(PP% &
entityQQ 
=>QQ 
{RR 
entitySS 
.SS 
ToTableSS "
(SS" #
$strSS# *
)SS* +
;SS+ ,
entityTT 
.TT 
HasKeyTT !
(TT! "
eTT" #
=>TT$ &
eTT' (
.TT( )
UserIdTT) /
)TT/ 0
;TT0 1
entityUU 
.UU 
PropertyUU #
(UU# $
eUU$ %
=>UU& (
eUU) *
.UU* +
UserIdUU+ 1
)UU1 2
.UU2 3
HasColumnTypeUU3 @
(UU@ A
$strUUA G
)UUG H
.UUH I
HasDefaultValueSqlUUI [
(UU[ \
$strUU\ p
)UUp q
.UUq r 
ValueGeneratedOnAdd	UUr Ö
(
UUÖ Ü
)
UUÜ á
;
UUá à
entityVV 
.VV 
PropertyVV #
(VV# $
eVV$ %
=>VV& (
eVV) *
.VV* +
NameVV+ /
)VV/ 0
.VV0 1

IsRequiredVV1 ;
(VV; <
)VV< =
.VV= >
HasMaxLengthVV> J
(VVJ K
$numVVK M
)VVM N
;VVN O
entityWW 
.WW 
PropertyWW #
(WW# $
eWW$ %
=>WW& (
eWW) *
.WW* +
EmailWW+ 0
)WW0 1
.WW1 2

IsRequiredWW2 <
(WW< =
)WW= >
.WW> ?
HasMaxLengthWW? K
(WWK L
$numWWL N
)WWN O
;WWO P
entityXX 
.XX 
HasIndexXX #
(XX# $
eXX$ %
=>XX& (
eXX) *
.XX* +
EmailXX+ 0
)XX0 1
.XX1 2
IsUniqueXX2 :
(XX: ;
)XX; <
;XX< =
entityYY 
.YY 
PropertyYY #
(YY# $
eYY$ %
=>YY& (
eYY) *
.YY* +
PhoneNumberYY+ 6
)YY6 7
.YY7 8

IsRequiredYY8 B
(YYB C
)YYC D
;YYD E
entityZZ 
.ZZ 
PropertyZZ #
(ZZ# $
eZZ$ %
=>ZZ& (
eZZ) *
.ZZ* +
PasswordHashZZ+ 7
)ZZ7 8
.ZZ8 9

IsRequiredZZ9 C
(ZZC D
)ZZD E
;ZZE F
}\\ 
)\\ 
;\\ 
}]] 	
}^^ 
}__ ¬ä
eC:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\Migrations\20250104134210_InitialCreate.cs
	namespace 	
Infrastructure
 
. 

Migrations #
{ 
public

 

partial

 
class

 
InitialCreate

 &
:

' (
	Migration

) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
AlterDatabase *
(* +
)+ ,
. 

Annotation 
( 
$str @
,@ A
$strB F
)F G
;G H
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str '
,' (
columns 
: 
table 
=> !
new" %
{ 
	InquiryId 
= 
table  %
.% &
Column& ,
<, -
Guid- 1
>1 2
(2 3
type3 7
:7 8
$str9 ?
,? @
nullableA I
:I J
falseK P
,P Q
defaultValueSqlR a
:a b
$strc w
)w x
,x y
ClientId 
= 
table $
.$ %
Column% +
<+ ,
Guid, 0
>0 1
(1 2
type2 6
:6 7
$str8 >
,> ?
nullable@ H
:H I
falseJ O
)O P
,P Q
Types 
= 
table !
.! "
Column" (
<( )
List) -
<- .
string. 4
>4 5
>5 6
(6 7
type7 ;
:; <
$str= E
,E F
nullableG O
:O P
trueQ U
)U V
,V W
MinPrice 
= 
table $
.$ %
Column% +
<+ ,
double, 2
>2 3
(3 4
type4 8
:8 9
$str: L
,L M
nullableN V
:V W
falseX ]
)] ^
,^ _
MaxPrice 
= 
table $
.$ %
Column% +
<+ ,
double, 2
>2 3
(3 4
type4 8
:8 9
$str: L
,L M
nullableN V
:V W
falseX ]
)] ^
,^ _
MinSquareFootage $
=% &
table' ,
., -
Column- 3
<3 4
double4 :
>: ;
(; <
type< @
:@ A
$strB T
,T U
nullableV ^
:^ _
false` e
)e f
,f g
MaxSquareFootage $
=% &
table' ,
., -
Column- 3
<3 4
double4 :
>: ;
(; <
type< @
:@ A
$strB T
,T U
nullableV ^
:^ _
false` e
)e f
,f g
NumberOfBedrooms $
=% &
table' ,
., -
Column- 3
<3 4
double4 :
>: ;
(; <
type< @
:@ A
$strB T
,T U
nullableV ^
:^ _
false` e
)e f
,f g
NumberOfBathrooms %
=& '
table( -
.- .
Column. 4
<4 5
double5 ;
>; <
(< =
type= A
:A B
$strC U
,U V
nullableW _
:_ `
falsea f
)f g
} 
, 
constraints   
:   
table   "
=>  # %
{!! 
table"" 
."" 

PrimaryKey"" $
(""$ %
$str""% 9
,""9 :
x""; <
=>""= ?
x""@ A
.""A B
	InquiryId""B K
)""K L
;""L M
}## 
)## 
;## 
migrationBuilder%% 
.%% 
CreateTable%% (
(%%( )
name&& 
:&& 
$str&& (
,&&( )
columns'' 
:'' 
table'' 
=>'' !
new''" %
{(( 

PropertyId)) 
=))  
table))! &
.))& '
Column))' -
<))- .
Guid)). 2
>))2 3
())3 4
type))4 8
:))8 9
$str)): @
,))@ A
nullable))B J
:))J K
false))L Q
,))Q R
defaultValueSql))S b
:))b c
$str))d x
)))x y
,))y z
Title** 
=** 
table** !
.**! "
Column**" (
<**( )
string**) /
>**/ 0
(**0 1
type**1 5
:**5 6
$str**7 O
,**O P
	maxLength**Q Z
:**Z [
$num**\ _
,**_ `
nullable**a i
:**i j
false**k p
)**p q
,**q r
Address++ 
=++ 
table++ #
.++# $
Column++$ *
<++* +
string+++ 1
>++1 2
(++2 3
type++3 7
:++7 8
$str++9 Q
,++Q R
	maxLength++S \
:++\ ]
$num++^ a
,++a b
nullable++c k
:++k l
false++m r
)++r s
,++s t
Type,, 
=,, 
table,,  
.,,  !
Column,,! '
<,,' (
string,,( .
>,,. /
(,,/ 0
type,,0 4
:,,4 5
$str,,6 <
,,,< =
nullable,,> F
:,,F G
false,,H M
),,M N
,,,N O
Price-- 
=-- 
table-- !
.--! "
Column--" (
<--( )
double--) /
>--/ 0
(--0 1
type--1 5
:--5 6
$str--7 I
,--I J
nullable--K S
:--S T
false--U Z
)--Z [
,--[ \
SquareFootage.. !
=.." #
table..$ )
...) *
Column..* 0
<..0 1
double..1 7
>..7 8
(..8 9
type..9 =
:..= >
$str..? Q
,..Q R
nullable..S [
:..[ \
false..] b
)..b c
,..c d
NumberOfBedrooms// $
=//% &
table//' ,
.//, -
Column//- 3
<//3 4
double//4 :
>//: ;
(//; <
type//< @
://@ A
$str//B T
,//T U
nullable//V ^
://^ _
false//` e
)//e f
,//f g
NumberOfBathrooms00 %
=00& '
table00( -
.00- .
Column00. 4
<004 5
double005 ;
>00; <
(00< =
type00= A
:00A B
$str00C U
,00U V
nullable00W _
:00_ `
false00a f
)00f g
,00g h
Description11 
=11  !
table11" '
.11' (
Column11( .
<11. /
string11/ 5
>115 6
(116 7
type117 ;
:11; <
$str11= U
,11U V
	maxLength11W `
:11` a
$num11b e
,11e f
nullable11g o
:11o p
false11q v
)11v w
,11w x
Status22 
=22 
table22 "
.22" #
Column22# )
<22) *
string22* 0
>220 1
(221 2
type222 6
:226 7
$str228 >
,22> ?
nullable22@ H
:22H I
false22J O
)22O P
,22P Q
ListingDate33 
=33  !
table33" '
.33' (
Column33( .
<33. /
DateTime33/ 7
>337 8
(338 9
type339 =
:33= >
$str33? Y
,33Y Z
nullable33[ c
:33c d
false33e j
)33j k
,33k l
	ImageURLs44 
=44 
table44  %
.44% &
Column44& ,
<44, -
string44- 3
>443 4
(444 5
type445 9
:449 :
$str44; A
,44A B
nullable44C K
:44K L
false44M R
)44R S
,44S T
UserID55 
=55 
table55 "
.55" #
Column55# )
<55) *
Guid55* .
>55. /
(55/ 0
type550 4
:554 5
$str556 <
,55< =
nullable55> F
:55F G
false55H M
)55M N
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% :
,99: ;
x99< =
=>99> @
x99A B
.99B C

PropertyId99C M
)99M N
;99N O
}:: 
):: 
;:: 
migrationBuilder<< 
.<< 
CreateTable<< (
(<<( )
name== 
:== 
$str== 
,== 
columns>> 
:>> 
table>> 
=>>> !
new>>" %
{?? 
UserId@@ 
=@@ 
table@@ "
.@@" #
Column@@# )
<@@) *
Guid@@* .
>@@. /
(@@/ 0
type@@0 4
:@@4 5
$str@@6 <
,@@< =
nullable@@> F
:@@F G
false@@H M
,@@M N
defaultValueSql@@O ^
:@@^ _
$str@@` t
)@@t u
,@@u v
NameAA 
=AA 
tableAA  
.AA  !
ColumnAA! '
<AA' (
stringAA( .
>AA. /
(AA/ 0
typeAA0 4
:AA4 5
$strAA6 M
,AAM N
	maxLengthAAO X
:AAX Y
$numAAZ \
,AA\ ]
nullableAA^ f
:AAf g
falseAAh m
)AAm n
,AAn o
EmailBB 
=BB 
tableBB !
.BB! "
ColumnBB" (
<BB( )
stringBB) /
>BB/ 0
(BB0 1
typeBB1 5
:BB5 6
$strBB7 N
,BBN O
	maxLengthBBP Y
:BBY Z
$numBB[ ]
,BB] ^
nullableBB_ g
:BBg h
falseBBi n
)BBn o
,BBo p
PhoneNumberCC 
=CC  !
tableCC" '
.CC' (
ColumnCC( .
<CC. /
stringCC/ 5
>CC5 6
(CC6 7
typeCC7 ;
:CC; <
$strCC= C
,CCC D
nullableCCE M
:CCM N
falseCCO T
)CCT U
,CCU V
PasswordHashDD  
=DD! "
tableDD# (
.DD( )
ColumnDD) /
<DD/ 0
stringDD0 6
>DD6 7
(DD7 8
typeDD8 <
:DD< =
$strDD> D
,DDD E
nullableDDF N
:DDN O
falseDDP U
)DDU V
}EE 
,EE 
constraintsFF 
:FF 
tableFF "
=>FF# %
{GG 
tableHH 
.HH 

PrimaryKeyHH $
(HH$ %
$strHH% /
,HH/ 0
xHH1 2
=>HH3 5
xHH6 7
.HH7 8
UserIdHH8 >
)HH> ?
;HH? @
}II 
)II 
;II 
migrationBuilderKK 
.KK 
CreateTableKK (
(KK( )
nameLL 
:LL 
$strLL $
,LL$ %
columnsMM 
:MM 
tableMM 
=>MM !
newMM" %
{NN 
TransactionIdOO !
=OO" #
tableOO$ )
.OO) *
ColumnOO* 0
<OO0 1
GuidOO1 5
>OO5 6
(OO6 7
typeOO7 ;
:OO; <
$strOO= C
,OOC D
nullableOOE M
:OOM N
falseOOO T
,OOT U
defaultValueSqlOOV e
:OOe f
$strOOg {
)OO{ |
,OO| }

PropertyIdPP 
=PP  
tablePP! &
.PP& '
ColumnPP' -
<PP- .
GuidPP. 2
>PP2 3
(PP3 4
typePP4 8
:PP8 9
$strPP: @
,PP@ A
nullablePPB J
:PPJ K
falsePPL Q
)PPQ R
,PPR S
BuyerIdQQ 
=QQ 
tableQQ #
.QQ# $
ColumnQQ$ *
<QQ* +
GuidQQ+ /
>QQ/ 0
(QQ0 1
typeQQ1 5
:QQ5 6
$strQQ7 =
,QQ= >
nullableQQ? G
:QQG H
falseQQI N
)QQN O
,QQO P
SellerIdRR 
=RR 
tableRR $
.RR$ %
ColumnRR% +
<RR+ ,
GuidRR, 0
>RR0 1
(RR1 2
typeRR2 6
:RR6 7
$strRR8 >
,RR> ?
nullableRR@ H
:RRH I
falseRRJ O
)RRO P
,RRP Q
	SalePriceSS 
=SS 
tableSS  %
.SS% &
ColumnSS& ,
<SS, -
doubleSS- 3
>SS3 4
(SS4 5
typeSS5 9
:SS9 :
$strSS; M
,SSM N
nullableSSO W
:SSW X
falseSSY ^
)SS^ _
,SS_ `
StatusTT 
=TT 
tableTT "
.TT" #
ColumnTT# )
<TT) *
stringTT* 0
>TT0 1
(TT1 2
typeTT2 6
:TT6 7
$strTT8 >
,TT> ?
nullableTT@ H
:TTH I
falseTTJ O
)TTO P
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% 6
,XX6 7
xXX8 9
=>XX: <
xXX= >
.XX> ?
TransactionIdXX? L
)XXL M
;XXM N
tableYY 
.YY 

ForeignKeyYY $
(YY$ %
nameZZ 
:ZZ 
$strZZ K
,ZZK L
column[[ 
:[[ 
x[[  !
=>[[" $
x[[% &
.[[& '

PropertyId[[' 1
,[[1 2
principalTable\\ &
:\\& '
$str\\( :
,\\: ;
principalColumn]] '
:]]' (
$str]]) 5
,]]5 6
onDelete^^  
:^^  !
ReferentialAction^^" 3
.^^3 4
Cascade^^4 ;
)^^; <
;^^< =
table__ 
.__ 

ForeignKey__ $
(__$ %
name`` 
:`` 
$str`` =
,``= >
columnaa 
:aa 
xaa  !
=>aa" $
xaa% &
.aa& '
BuyerIdaa' .
,aa. /
principalTablebb &
:bb& '
$strbb( /
,bb/ 0
principalColumncc '
:cc' (
$strcc) 1
,cc1 2
onDeletedd  
:dd  !
ReferentialActiondd" 3
.dd3 4
Cascadedd4 ;
)dd; <
;dd< =
tableee 
.ee 

ForeignKeyee $
(ee$ %
nameff 
:ff 
$strff >
,ff> ?
columngg 
:gg 
xgg  !
=>gg" $
xgg% &
.gg& '
SellerIdgg' /
,gg/ 0
principalTablehh &
:hh& '
$strhh( /
,hh/ 0
principalColumnii '
:ii' (
$strii) 1
,ii1 2
onDeletejj  
:jj  !
ReferentialActionjj" 3
.jj3 4
Cascadejj4 ;
)jj; <
;jj< =
}kk 
)kk 
;kk 
migrationBuildermm 
.mm 
CreateIndexmm (
(mm( )
namenn 
:nn 
$strnn /
,nn/ 0
tableoo 
:oo 
$stroo %
,oo% &
columnpp 
:pp 
$strpp !
)pp! "
;pp" #
migrationBuilderrr 
.rr 
CreateIndexrr (
(rr( )
namess 
:ss 
$strss 2
,ss2 3
tablett 
:tt 
$strtt %
,tt% &
columnuu 
:uu 
$struu $
)uu$ %
;uu% &
migrationBuilderww 
.ww 
CreateIndexww (
(ww( )
namexx 
:xx 
$strxx 0
,xx0 1
tableyy 
:yy 
$stryy %
,yy% &
columnzz 
:zz 
$strzz "
)zz" #
;zz# $
}{{ 	
	protected~~ 
override~~ 
void~~ 
Down~~  $
(~~$ %
MigrationBuilder~~% 5
migrationBuilder~~6 F
)~~F G
{ 	
migrationBuilder
ÄÄ 
.
ÄÄ 
	DropTable
ÄÄ &
(
ÄÄ& '
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ '
)
ÅÅ' (
;
ÅÅ( )
migrationBuilder
ÉÉ 
.
ÉÉ 
	DropTable
ÉÉ &
(
ÉÉ& '
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ $
)
ÑÑ$ %
;
ÑÑ% &
migrationBuilder
ÜÜ 
.
ÜÜ 
	DropTable
ÜÜ &
(
ÜÜ& '
name
áá 
:
áá 
$str
áá (
)
áá( )
;
áá) *
migrationBuilder
ââ 
.
ââ 
	DropTable
ââ &
(
ââ& '
name
ää 
:
ää 
$str
ää 
)
ää 
;
ää 
}
ãã 	
}
åå 
}çç ¡
QC:\Users\cezar\Desktop\RealEstateManagement\Infrastructure\DependencyInjection.cs
	namespace 	
Infrastructure
 
{		 
public

 

static

 
class

 
DependencyInjection

 +
{ 
public 
static 
IServiceCollection (
AddInfrastructure) :
(: ;
this; ?
IServiceCollection@ R
servicesS [
,[ \
IConfiguration] k
configurationl y
)y z
{ 	
services 
. 
AddDbContext !
<! " 
ApplicationDbContext" 6
>6 7
(7 8
options8 ?
=>@ B
options 
. 
	UseNpgsql !
(! "
configuration !
.! "
GetConnectionString" 5
(5 6
$str6 I
)I J
,J K
b 
=> 
b 
. 
MigrationsAssembly -
(- .
typeof. 4
(4 5 
ApplicationDbContext5 I
)I J
.J K
AssemblyK S
.S T
FullNameT \
)\ ]
)] ^
)^ _
;_ `
services 
. 
	AddScoped 
< &
IPropertyListingRepository 9
,9 :%
PropertyListingRepository; T
>T U
(U V
)V W
;W X
services 
. 
	AddScoped 
< $
IClientInquiryRepository 7
,7 8#
ClientInquiryRepository9 P
>P Q
(Q R
)R S
;S T
services 
. 
	AddScoped 
< "
ITransactionRepository 5
,5 6!
TransactionRepository7 L
>L M
(M N
)N O
;O P
services 
. 
	AddScoped 
< 
IUserRepository .
,. /
UserRepository0 >
>> ?
(? @
)@ A
;A B
return 
services 
; 
} 	
} 
} 